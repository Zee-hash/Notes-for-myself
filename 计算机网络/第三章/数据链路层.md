# 数据链路层  
---  
## 数据链路层的功能  
数据链路层在物理层提供服务的基础上向网络层提供服务，其主要作用是加强物理层传输原始比特流的功能，将物理层提供的可能出错的物理连接改为逻辑上无差错的数据链路，使之对网络层表现为一条无差错的链路。  
下面具体介绍数据链路层的功能。  
### 为网络层提供服务  
对网络层而言，数据链路层的基本任务是将源机器中来自网络层的数据传输到目标机器的网络层中。数据链路层为网络层提供如下服务：  
+ 无确认的无连接服务。源机器发送数据帧时不需要先建立链路连接，目的机器收到数据帧时不需发回确认。对丢失的帧，数据链路层不负责重发而交给上层处理。适用于实时通信或误码率较低的通信信道，如以太网。  
+ 有确认的无连接服务。源机器发送数据帧时不需要先建立链路连接，但目的机器收到数据帧时必须发回确认。源机器在所规定的时间内未收到确认信号时，就重传丢失的帧，以提高传输的可靠性。该服务适用于误码率较高的通信信道，如无线通信。  
+ 有确认的面向连接服务。帧传输过程分为三个阶段：建立数据链路、传输帧、释放数据链路。目的机器对收到的每一帧都要给出确认，源机器收到确认后才能发送下一条帧，因而该服务的可靠性最高。该服务适用于通信要求（可靠性、实时性）较高的场合。  

### 链路管理  
数据链路层连接的建立、维持和释放过程称为链路管理，它主要用于面向连接的服务。链路两端的结点要进行通信，必须首先确认对方处于就绪状态，并交换一些必要的信息对帧序号初始化，然后才能建立连接，在传输的过程中则要能维持连接，而在传输完毕后要释放该连接。在多个站点共享同一物理信道的情况下（例如在局域网中）如何在要求的站点间分配和管理信道也属于数据链路层管理的范畴。  

### 帧定界、帧同步与透明传输  
两个工作站之间传输信息时，必须将网络层的分组封装成帧，以帧的格式进行传送。将一段数据的前后添加首部和尾部，就构成了帧。首部和尾部中含有很多控制信息，它们的一个重要作用就是确定帧的界限，即帧定界。而帧同步指的是接收方应能从接收到的二进制比特流中区分出帧的起始和终止。如在HDLC通信规程中，用标识位F(01111110)来标识帧的开始和结束。通信过程中，检测到帧标识F即为帧的开始，然后一旦检测到帧标识位F即表示帧的结束。HDLC标准帧格式如下：  
| 标志 | 地址 | 控制 | 信息 | 帧校验序列 | 标志 |  
| --- | --- | --- | --- | --- | --- | --- |  
| F(01111110) | A 8位 | C 8位 | I N位 | FCS 16位 | F(01111110) |  

如果在数据中恰好出现与帧定界符相同的比特组合（会被误认“传输结束”而丢弃后面的数据），那么就要采用有效的措施解决这个问题，即透明传输。更确切地说，透明传输就是不管所传数据是什么样的比特组合，都应当能在链路上传送。  

### 流量控制  
由于收发双方各自的工作速率和缓存空间的差异，可能出现发送方的发送能力大于接收方的接受能力的现象，如若此时不适当限制发送方的发送速率（即链路上信息流量），前面来不及接收的帧将会被后面不断发送来的帧“淹没”，造成帧的丢失而出错。因此，流量控制实际上就是限制发送方的数据流量，使其发送速率不超过接收方的接收能力。  
这个过程需要通过某种反馈机制使发送方知道接收方能否跟得上自己，即需要有一些规则使得发送方知道在什么情况下可以接着发送下一帧，而在什么情况下必须暂停发送，以等待收到某种反馈信号后继续发送。  
流量控制并不是数据链路层特有的功能，许多高层协议中也提供此功能，只不过控制的对象不同而已。对于数据链路层来说，控制的是相邻两结点之间的数据链路上的流量，而对于运输层来说，控制的则是从源端到目的端之间的流量。  

### 差错控制  
由于信道噪声等各种原因，帧在传输过程中可能会出现错误。用以**使发送方确定接收方是否正确收到由其发送的数据的方法称为差错控制**。通常，这些错误可分为位错和帧错。  
位错指帧中某些位出现了差错。通常采用循环冗余校验（CRC）方式发现位错，通过自动重传请求（Automatic Repeat reQuest,ARQ）方式来重传出错的帧。具体做法是：让发送方将要发送的数据帧附加一定的CRC冗余校验码一并发送，接收方则根据检错码对数据帧进行错误检测，若发现错误则丢弃，发送方超时重传该数据帧。这种差错控制方法称为ARQ法。ARQ法只需返回很少的控制信息就可有效地确认所发数据帧是否被正确接收。  
帧错误指帧的丢失、重复或失序等错误。在数据链路层引入定时器和编码机制，以保证每一帧最终都能有且仅有一次正确地交付给目的结点。  

---  
## 组帧  
数据链路层之所以要把比特组合成帧为单位传输，是为了在出错时只重发出错的帧，而不必重发全部数据，从而提高效率。为了使接收方能正确地接收并检查所传输的帧，发送方必须依据一定的规则把网络层递交的分组封装成帧（称为组帧）。组帧主要解决帧定界、帧同步、透明传输等问题。通常有以下4种方法实现组帧。  
### 字符计数法  
字符计数法是指在帧头部使用一个计数字段来标明帧内字符数。目的结点的数据链路层收到字节计数值时，就知道后面跟随的字节数，从而可以确定帧结束的位置（计数字段提供的字节数包含自身所占用的一个字节）。  
这种方法最大的问题在于如果计数字段出错，即失去了帧边界划分的依据，那么接收方就无法判断所传输帧的结束位和下一帧的开始位，收发双方将失去同步，从而造成灾难性的后果。  
### 字符填充的首尾定界符法  
字符填充法使用一些特殊的字符来定界一帧的开始DLE STX与结束DLE ETX。为了使信息位中出现的特殊字符不被误判为帧的首尾定界符，可以在特殊字符前面填充一个转义字符DLE来加以区分，以实现数据的透明传输。接收方收到转义字符后，就知道其后面紧跟的是数据信息，而不是控制信息。  
### 零比特填充的首尾标志法  
零比特填充法允许数据帧包含任意个数的比特，也允许每个字符的编码包含任意个数的比特。它使用一个特定的比特模式，即01111110来标志一帧的开始和结束。为了不使信息位中出现的比特流01111110被误判为帧的首尾标志，发送方的数据链路层在信息位中遇到5个连续的“1”时，将自动在其后插入一个“0”；而接收方做该过程的逆操作，即每收到5个连续的“1”时，自动删除后面紧跟的“0”，以恢复原信息。  
零比特填充法很容易用硬件来实现，性能优于字符填充法。  
### 违规编码法  
在物理层进行比特编码时，通常采用违规编码法。例如，曼彻斯特编码方法将数据比特“1”编码成“高-低”电平对，将数据比特“0”编码成“低-高”电平对，而“高-高”电平对和“低-低”电平对在数据比特中是违规的（即没有采用）。可以借助这些违规编码序列来定界帧的起始和终止。局域网IEEE 802标准就采用了这种方法。  
违规编码法不需要采用任何填充技术，便能实现数据传输的透明性，但它只适用于采用冗余编码的特殊编码环境。  
由于字节计数法中计数字段的脆弱性和字符填充法实现的复杂性和不兼容性，目前较常用的组帧方法是比特填充法和违规编码法。  

---  
## 差错控制  
实际通信链路都不是理想的，比特在传输过程中可能会产生差错，1可能会变成0，0可能会变成1，这就是比特差错。比特差错是传输差错中的一种。  
通常利用编码技术来进行差错控制，主要有两类：自动重传请求ARQ和前向纠错FEC。在ARQ方式中，接收端检测出现差错时，就设法通知发送端重发，直到接收到正确的码字为止。在FEC方式中，接收端不但能发现差错，而且能确定比特串的错误位置，从而加以纠正。因此，差错控制可分为检错编码和纠错编码。  
### 检错编码  
检错编码都采用冗余编码技术，其核心思想是在有效数据（信息位）被发送前，先按某种各系附加一定的冗余位，构成一个符合某一规则的码字后再发送。当要发送的有效数据变化时，相应的冗余位也随着变化，使得码字遵从不变的规则。接收端根据收到的码字是否仍符合原规则来判断是否出错。常见的检错编码有奇偶校验码和循环冗余码。  
+ 奇偶校验码  
  奇偶校验码是奇校验码和偶检验码的统称，是一种最基本的检错码。它由n-1位信息元和1位检验元组成，如果是奇校验码，那么在附加一个校验元后，码长为n的码字中“1”的个数为奇数；如果是偶校验码，那么在附加一个校验元后，码长为n的码字中“1”的个数为偶数。它又分为垂直奇偶校验、水平奇偶校验和水平垂直奇偶校验。  
+ 循环冗余码  
  循环冗余码Cyclic Redundancy Code又称多项式码，任何一个由二进制数位串组成的代码都可以与一个只含有0和1两个系数的多项式建立一一对应关系。一个k位帧可以视为从X<sup>k-1</sup>到X<sup>0</sup>的k次多项式的系数序列，这个多项式的阶数为k-1，高位是X<sup>k-1</sup>项的系数，下一位是X<sup>k-2</sup>的系数，以此类推。  
  给定一个m bit的帧或报文，发送器生成一个r bit的序列，称为帧校验序列FCS。这样所形成的帧将由m+r比特组成。发送方和接收方事先商定一个多项式G(x)（最高位和最低位必须为1），使这个带检验码的帧刚好能被预先确定的多项式G(x)整除。接收方用相同的多项式去除收到的帧，如果无余数，那么认为无差错。  
  假设一个帧有m位，其对应的多项式为M(x)，则计算冗余码的步骤如下：  
  + 加0。假设G(x)的阶为r，在帧的低位端上加上r个0  
  + 模2除。利用模2除法，用G(x)对应的数据串去除上一步计算出的数据串，得到的余数即为冗余码（共r位）  

  多项式以2为模运算。按照模2运算规则，加法不进位，减法不借位，它刚好是异或操作。  

### 纠错编码  
在数据通信过程中，解决差错问题的一种方法是在每个要发送的数据块上附加足够的冗余信息，使接收方能够推导出发送方实际送出的应该是什么样的比特串。最常见的纠错编码是海明码，其实现原理是在有效信息位中加入几个校验位形成海明码，并把海明码的每个二进制位分配到几个奇偶校验组中。当某一位出错后，就会引起有关的几个校验位的值发生变化，这不但可以发现错位，而且能指出错位的位置，为自动纠错提供依据。  
现以数据码1010为例讲述海明码的编码原理和实现过程。  
+ 确定海明码的位数  
  设n为有效信息位数，k为校验位的位数，则信息位n和校验位k应满足  
  *n+k<=2<sup>k</sup>-1*（若要检测两位错，则需要再增加一位校验位，即k+1位）  
  本例中4+3<=2<sup>3</sup>-1成立，则n=4,k=3有效。设信息位为D<sub>4</sub>D<sub>3</sub>D<sub>2</sub>D<sub>1</sub>(1010)，共4位，校验位为P<sub>3</sub>P<sub>2</sub>P<sub>1</sub>，共3位，对应的海明码为H<sub>7</sub>H<sub>6</sub>H<sub>5</sub>H<sub>4</sub>H<sub>3</sub>H<sub>2</sub>H<sub>1</sub>。  
+ 确定校验位的分布  
  规定校验位P<sub>i</sub>在海明位号为2<sup>i-1</sup>的位置上，其余各位为信息位，因此有：  
  P<sub>1</sub>的海明位号为2<sup>i-1</sup>=2<sup>0</sup>=1，即H<sub>1</sub>为P<sub>1</sub>  
  P<sub>2</sub>的海明位号为2<sup>i-1</sup>=2<sup>1</sup>=2，即H<sub>2</sub>为P<sub>2</sub>  
  P<sub>3</sub>的海明位号为2<sup>i-1</sup>=2<sup>2</sup>=4，即H<sub>4</sub>为P<sub>3</sub>  
  将信息位按原来的顺序插入，则海明码各位的分布如下：  

  |H<sub>7</sub>|H<sub>6</sub>|H<sub>5</sub>|H<sub>4</sub>|H<sub>3</sub>|H<sub>2</sub>|H<sub>1</sub>|  
  |---|---|---|---|---|---|---|  
  |D<sub>4</sub>|D<sub>3</sub>|D<sub>2</sub>|P<sub>3</sub>|D<sub>1</sub>|P<sub>2</sub>|P<sub>1</sub>|  

+ 分组形成校验关系  
  每个数据位用多个校验位进行校验，但要满足条件；被校验数据位的海明位号等于校验该数据位的各校验位海明位号之和。另外，校验位不需要再被校验。分组形成的校验关系如下：  
  D<sub>1</sub>所在海明位号3 = 2 + 1  
  D<sub>2</sub>所在海明位号5 = 4 + 1  
  D<sub>3</sub>所在海明位号6 = 4 + 2  
  D<sub>4</sub>所在海明位号7 = 4 + 2 + 1  
+ 校验位取值  
  校验位P<sub>i</sub>的值为第i组（由该校验位校验的数据位）所有位求异或。  
  P<sub>1</sub>=D<sub>1</sub>⊕D<sub>2</sub>⊕D<sub>4</sub>=0⊕1⊕1=0  
  P<sub>2</sub>=D<sub>1</sub>⊕D<sub>3</sub>⊕D<sub>4</sub>=0⊕0⊕1=1  
  P<sub>3</sub>=D<sub>2</sub>⊕D<sub>3</sub>⊕D<sub>4</sub>=1⊕0⊕1=0  
  所以，1010对应的海明码为101**0**0**10**。  
+ 海明码的校验原理  
  每个校验组分别利用校验位和参与形成该校验位的信息位进行奇偶校验检查，构成k个校验方程：  
  S<sub>1</sub> = P<sub>1</sub>⊕D<sub>1</sub>⊕D<sub>2</sub>⊕D<sub>4</sub>  \
  S<sub>2</sub> = P<sub>2</sub>⊕D<sub>1</sub>⊕D<sub>3</sub>⊕D<sub>4</sub>  
  S<sub>3</sub> = P<sub>3</sub>⊕D<sub>2</sub>⊕D<sub>3</sub>⊕D<sub>4</sub>  
  若S<sub>3</sub>S<sub>2</sub>S<sub>2</sub>的值为“000”，则说明无错；否则说明出错，且这个数就是错误位的位号。直接将该位取反就达到了纠错的目的。  

---  
## 流量控制与可靠传输机制  
### 流量控制、可靠传输与滑动窗口机制  
流量控制涉及对链路上的帧的发送速率的控制，以使接收方有足够的缓冲空间来接收每个帧。例如，在面向帧的自动重传请求系统中，当待确认帧的数量增加时，有可能超出缓冲存储空间而造成过载。流量控制的基本方法是由接收方控制发送方发送数据的速率，常见的方式有两种：停止-等待协议和滑动窗口协议。  
#### 停止-等待流量控制基本原理  
发送方每发送一帧，都要等待接收方的应答信号，之后才能发送下一帧；接收方每接收一帧，就要反馈一个应答信号，表示棵接收下一帧，如果接收方不反馈应答信号，那么发送方必须一直等待，每次仅允许发送一帧，然后就陷入等待接收方确认消息的过程中，因而传输效率很低。  
#### 滑动窗口流量控制基本原理  
在任意时刻，发送方都维持一组连续的允许发送的帧的序号，称为发送窗口；同时接收方也维持一组连续的允许接收帧的序号，称为接收窗口。发送窗口用来对发送窗口进行流量控制，而发送窗口的大小W<sub>T</sub>代表还未收到确认信息的情况下发送方最多还可以发送多少个数据帧。同理，在接收端设置接收窗口是为了控制可以接收哪些数据帧和不可以接收哪些数据帧。在接收方，只有收到的数据帧的序号落入接收窗口内时，才允许将该数据帧收下。若接收到的数据帧落在接收窗口之外，则一律将其丢弃。  
发送端每收到一个确认帧，发送窗口就向前滑动一个帧的位置，当发送窗口内没有可以发送的帧（即窗口内帧全部是已发送但未收到确认的帧）时，发送方就会停止发送，直到收到接收方发送的确认帧使窗口移动，窗口内有可以发送的帧后，才开始继续发送。  
接收端收到数据帧后，将窗口向前移动一个位置，并发回确认帧，若收到的数据帧落在接收窗口之外，则一律丢弃。  
滑动窗口有以下重要特性：  
+ 只有接收窗口向前滑动（同时接收方发送了确认帧）时，发送窗口才有可能（只有发送方收到确认帧后才一定）向前滑动。  
+ 从滑动窗口的概念看，停止-等待协议、后退N帧协议和选择重传协议只在发送窗口大小与接收窗口大小上有所差别：  
  - 停止-等待协议：发送窗口大小=1，接收窗口大小=1。  
  - 后退N帧协议：发送窗口大小>1，接收窗口大小=1。  
  - 选择重传协议：发送窗口大小>1，接收窗口大小>1。

+ 接收窗口的大小=1时，可保证帧的有序接收。  
+ 数据链路层的滑动窗口协议中，窗口的大小在传输过程中是固定的。  

#### 可靠传输机制  
数据链路层的可靠传输通常使用确认和超时重传两种机制来完成。确认是一种无数据的控制帧，这种控制帧使得接收方可以让发送方知道哪些内容被正确接收。有些情况下为了提高传输效率，将确认捎带在一个回复帧中，称为捎带确认。超时重传是指发送方在发送某个数据帧后就开启一个计时器，在一定时间内如果没有得到发送的数据帧的确认帧，那么就重新发送该数据帧，直到发送成功为止。  
自动重传请求Auto Repeat reQuest通过接收方请求发送方重传出错的数据帧来恢复出错的帧，是通信中用于处理信道所带来差错的方法之一。传统自动重传请求分为三种，即停止-等待ARQ、后退N帧ARQ和选择性重传ARQ。后两种协议是滑动窗口技术与请求重发技术的结合，由于窗口尺寸开到足够大，帧在线路上可以连续地流动，因此又称其为连续ARQ协议。注意，在数据链路层中流量控制机制和可靠传输机制是交织在一起的。  

### 单帧滑动窗口与停止-等待协议  
在停止等待协议中，源站发送单个帧后必须停止等待，在目的站的回答到达源站之前，源站不能发送其他的数据帧。从滑动窗口机制的角度看，停止-等待协议相当于发送窗口和接收窗口大小均等于1的滑动窗口协议。  
在停止-等待协议中，除数据帧丢失外，还可能出现以下两种差错：  
+ 到达目的站的帧可能已遭到破坏，接收站利用差错检测技术检出之后，简单地将该帧丢弃。为了对付这种可能发生的情况，源站装备了计时器。在一个帧发送之后，源站等待确认，如果在计时器计满时仍未收到确认，那么再次发送相同的帧。如此反复，直到该数据帧无错误地到达为止。  
+ 数据帧正确而确认帧被破坏，此时接收方已收到正确的数据，但发送方收不到确认帧，因此发送方会重传已被接收的数据帧，接收方收到同样的数据帧时会丢弃该帧，并重传一个该帧对应的确认帧。发送的帧交替地使用0和1来标识，肯定确认分别用ACK0和ACK1来表示，收到的确认有误时，重传已经发送的帧。对于停止-等待协议，由于每发送一个数据帧就停止并等待，因此用1bit来编号就已足够。在停止-等待协议中，若连续出现相同发送序号的数据帧，表明发送端进行了超时重传。连续出现相同序号的确认帧时，表明接收端收到了重复帧。  

此外，为了超时重发和判定重复帧的需要，发送方和接收方都需设置一个帧缓冲区。发送端在发送完数据帧时，必须在其发送缓存中保存此数据帧的副本，这样才能在出差错时进行重传。只有在收到对方发来的确认帧ACK时，才清除此副本。  

### 多帧滑动窗口与后退N帧协议GBN  
在后退N帧ARQ中，发送方无须在收到上一个帧的ACK后才能开始发送下一帧，而是可以连续发送帧。当接收方检测出失序的信息帧后，要求发送方重发最后一个正确接收的信息帧之后的所有未被确认的帧；或者当发送方发送了N个帧后，若发现该N个帧的前一个帧在计时器超时后仍未返回其确认信息，则该帧被判为出错或丢失，此时发送方就不得不重传该出错帧及随后的N个帧。  
源站向目的站发送数据帧，源站每发送完一帧就为该帧设置一个超时计时器。由于连续发送了许多帧，所以确认帧必须要指明是对哪一帧进行确认。为了减少开销，GBN协议还规定接收端不一定每收到一个正确的数据帧就必须立即发回一个确认帧，而可以在连续收到好几个正确的数据帧后，才对最后一个数据帧发确认信息，或者可在自己有数据要发送时才将以前正确收到的帧加以捎带确认。这就是说，对某一数据帧的确认就表明该数据帧和此前所有的数据帧均已正确无误地收到。接收端只按序接收数据帧。如：接收端在接收数据帧时，在有差错的2号帧后又收到了几个正确的数据帧，但接收端必须把这些数据帧丢弃。另外，接收端虽然丢弃了这些不按序的无差错帧，但应重复发送已发送的最后一个确认帧ACK1（为了防止已发送的确认帧ACK1丢失，其中ACKn表示对第n帧的确认，即接收方已正确接收到第n号帧及以前的所有帧）。  
后退N帧协议的接收串口为1，可以保证按序接收数据帧。若采用n比特对帧编号，则其发送窗口的尺寸W<sub>T</sub>应满足1<=W<sub>T</sub><=2<sup>n</sup>。若发送窗口的尺寸大于2<sup>n</sup>-1，则会造成接收方无法分辨新帧和旧帧。  
后退N帧协议一方面因连续发送数据帧而提高了信道的利用率，另一方面在重传发面又必须把原来已传送正确的数据帧进行重传，这种做法又使效率降低。由此可见，**若信道传输质量很差导致误码率较大时，后退N帧协议不一定优于停止-等待协议。**  

### 多帧滑动窗口与选择重传协议SR  
为进一步提高信道的利用率，可设法只重传出现差错的数据帧或计时器超时的数据帧，但此时必须加大接收窗口，以便先收下发送序号不连续但仍处在接收窗口内中的那些数据帧。等到所缺序号的数据帧收到再一并送交主机。这就是选择重传ARQ协议。  
在选择重传协议中，每个发送缓冲区对应一个计时器，当计时器超时时，缓冲区的帧就会重传。另外，该协议使用了比上述其他协议更有效的差错处理策略，即一旦接收方怀疑帧出错，就会发一个否定帧NAK给发送方，要求发送方对NAK中指定的帧进行重传。  
选择重传协议的接收窗口尺寸W<sub>R</sub>和发送窗口尺寸W<sub>T</sub>都大于1，一次可以发送或接收多个帧。若采用n比特对帧编号，为了保证接收方向前移动窗口后，新窗口序号与旧窗口序号没有重叠部分，需要满足条件：接收窗口W<sub>R</sub>+发送窗口W<sub>T</sub> <= 2<sup>n</sup>。假定仍然采用累计确认的方法，并且接收窗口W<sub>R</sub>显然不应超过发送窗口W<sub>T</sub>，那么接收窗口的尺寸不应超过序号范围的一半，即W<sub>R</sub> <= 2<sup>n-1</sup>。一般情况下，在SR协议中，接收窗口的大小和发送窗口的大小是相同的。  
选择重传协议可以避免重复传送那些本已正确到达接收端的数据帧，但在接收端要设置具有相当容量的缓冲区来暂存那些未按序正确收到的帧。接收端不能接收窗口下界以下或窗口上界以上的序号的帧，因此所需缓冲区的数目等于窗口的大小，而不是序号的数目。  

---  
## 介质访问控制  
介质访问控制所要完成的主要任务是，为使用介质的每个结点隔离来自同一信道其他结点所传送的信号，以协调活动结点的传输。用来决定广播信道中信道分配协议属于数据链路层的一个子层，称为介质访问控制(Medium Access Control，MAC)子层。  
介质访问控制的内容是，采取一定的措施，使得两对结点之间的通信不会发生互相干扰的情况。  
常见的介质访问控制方法有信道划分介质访问控制、随机访问介质访问控制和轮询访问介质访问控制。其中前者是静态划分信道的方法，而后两者是动态分配信道的方法。  

### 信道划分介质访问控制  
信道划分介质访问控制将使用介质的每个设备与来自同一通信信道上的其他设备的通信隔离开来，把时域和频域资源合理地分配给网络上的设备。  
多路复用技术：当传输介质的带宽超过传输单个信号所需的带宽时，人们就通过在一条介质上同时携带多个传输信号的方法来提高传输系统的利用率，这就是所谓的多路复用，也是实现信道划分介质访问控制的途径。多路复用技术把多个信号组合在一条物理信道上进行传输，使多个计算机或终端设备共享信道资源，提高了信道的利用率。  
采用多路复用技术可把多个输入通道的信息整合到一个复用信道中，在接收端把收到的信息分离出来并传送到相应的输出通道。  
信道划分的实质就是通过分时、分频、分码等方法把原来的一条广播信道，逻辑上分为几条用于两个结点之间通信的互不干扰的子信道，实际上就是把广播信道转变为点对点信道。  
信道划分介质访问控制分为以下4种：  
#### 频分多路复用FDM  
频分多路复用是一种将多路基带信号调制到不同频率载波上，在叠加形成一个复合信号的多路复用技术。在物理信道的可用带宽超过单个原始信号所需带宽的情况下，可将该物理信道的总带宽分割成若干与传输单个信号带宽相同或略宽的子信道，每个子信道传输一种信号，这就是频分多路复用。  
每个子信道分配的带宽可不相同，但它们的综合必须不超过信道的总带宽。在实际应用中，为了防止子信道之间的干扰，相邻信道之间需要加入“保护频带”。  
频分多路复用的优点在于充分利用了传输介质的带宽，系统效率较高；由于技术比较成熟，实现也比较容易。  
#### 时分多路复用TDM  
时分多路复用是将一条物理信道按时间分成若干时间片，轮流地分配给多个信号使用。每个时间片由复用的一个信号占用，而不像FDM那样，同一时间同时发送多路信号。这样，利用每个信号在时间上的交叉，就可以在一条物理信道上传输多个信号。  
在某个时刻来看，时分多路复用信道上传送的仅是某一对设备之间的信号；就某段时间而言，传送的是按时间分割的多路复用信号。但由于计算机数据的突发性，一个用户对已分配到的子信道的利用率一般不高。统计时分多路复用STDM（又称异步时分多路复用）是TDM的一种改进，它采用STDM帧，STDM帧并不固定分配时隙，而按需动态地分配时隙，当终端有数据要传送时，才会分配到时间片，因此可以提高线路的利用率。  
#### 波分多路复用WDM  
波分多路复用即光的频分多路复用，它在一根光纤中传输多种不同波长（频率）的光信号，由于波长（频率）不同，各路光信号互不干扰，最后再用波长分解复用器将各路波长分解出来。由于光波处于频谱的高频段，有很高的带宽，因而可以实现多路的波分复用。  
#### 码分多路复用CDM  
码分多路复用是采用不同的编码来区分各路原始信号的一种复用方式。与FDM和TDM不同，它既共享信道的频率，又共享时间。  
码分多址(Code Division Multiple Access,CDMA)是码分复用的一种方式，其原理是每比特时间被分成m个更短的时间槽，称为码片Chip，通常情况下每比特有64或128个码片。每个站点被指定一个唯一的m位代码或码片序列。发送1时，站点发送码片序列；发送0时，站点发送码片序列的反码。当两个或多个站点同时发送时，各路数据在信道中线性相加。为从信道中分离出各路信号，要求各个站点的码片序列相互正交。  
码分多路复用技术具有频谱利用率高、抗干扰能力强
保密性强、语音质量好等优点，还可减少投资和降低运行成本，主要用于无线通信系统，特别是移动通信系统。  

### 随机访问介质访问控制  
在随机访问协议中，不采用集中控制方式解决发送信号的次序问题，所有用户能根据自己的意愿随机地发送信息，占用信道全部速率。在总线型网络中，当有两个或多个用户同时发送信息时，就会产生帧的冲突（碰撞），导致所有冲突用户的发送均以失败告终。为了解决随机接入发生的碰撞，每个用户需要按照一定的规则反复地重传它的帧，直到该帧无碰撞地通过。这些规则就是随机访问介质访问控制协议，常用的协议有ALOHA协议、CSMA协议、SCMA/CD协议和CSMA/CA协议等，它们的核心思想都是：胜利者通过争用获得信道，从而获得信息的发送权。因此，随机访问介质访问控制协议又称争用型协议。  
#### ALOHA协议  
夏威夷大学早期研制的随机接入系统称为ALOHA(Additive Link On-line HAwaii system)。ALOHA协议分为纯ALOHA协议和时隙ALOHA协议两种。  
+ 纯ALOHA协议  
  纯ALOHA协议的基本思想是，当网络中的任何一个站点需要发送数据时，可以不进行任何检测就发送数据。如果在一段时间内未收到确认，那么该站点就认为传输过程中发生了冲突。发送站点需要等待一段时间后再发送数据，直至发送成功。  
  纯ALOHA系统采用的重传策略是让各站等待一段随机的时间，然后再进行重传。若再次发生碰撞，则需要再等待一段随机的时间，直至重传成功为止。  
+ 时隙ALOHA协议  
  时隙ALOHA协议把所有各站在时间上同步起来，并将时间划分为一段段等长的时隙Slot，规定只能在每个时隙开始时才能发送发送一个帧。从而避免了用户发送数据的随意性，减少了发生冲突的可能性，提高了信道的利用率。  

#### CSMA协议  
若每个站点在发送前都先侦听一下共用信道，发现信道空闲后再发送，则就会大大降低冲突的可能，从而提高信道的利用率，载波侦听多路访问(Carrier Sense Multiple Access,CSMA)协议依据的正是这一思想。CSMA协议是在ALOHA协议基础上提出的一种改进协议，它与ALOHA协议的主要区别是多了一个载波侦听装置。  
根据侦听方式和侦听到信道忙后的处理方式不同，CSMA协议分为三种：  
+ 1-坚持CSMA  
  1-persistent CSMA的基本思想是：一个结点要发送数据时，首先侦听信道；如果信道空闲，那么立即发送数据；如果信道忙，那么等待，同时继续侦听直至信道空闲；如果发生冲突，那么随机等待一段时间后，在重新开始侦听信道。  
  “1-坚持”的含义是：侦听到信道忙后，继续坚持侦听信道；侦听到信道空闲时，发送帧的概率为1，即立刻发送数据。  
  传播延迟对1-坚持CSMA协议的性能影响较大。结点A开始发送数据时，结点B也正好有数据要发送，但这时结点A发出的数据还未到达结点B，结点B侦听到信道空闲，于是立即发送数据，结果必然导致冲突。即使不考虑延迟，1-坚持CSMA协议也可能产生冲突。例如，结点A正在发送数据时，结点B和C也准备发送数据，侦听到信道忙，于是坚持侦听，结果当结点A一发送完毕，结点B和C就会立即发送数据，同样导致冲突。  
+ 非坚持CSMA  
  Non-persistent CSMA的基本思想是：一个结点要发送数据时，首先侦听信道；如果信道空闲，那么立即发送数据；如果信道忙，那么放弃侦听，等待一个随机的时间后再重复上述过程。  
  非坚持CSMA协议在侦听到信道忙后就放弃侦听，因此降低了多个节点等待信道空闲后同时发送数据导致冲突的概率，但也会增加数据在网络中的平均延迟。可见，信道利用率的提高是以增加数据在网络中的延迟时间为代价的。  
+ p-坚持CSMA  
  P-persistent CSMA用于时分信道，其基本思想是：一个结点要发送数据时，首先侦听信道；如果信道忙，就持续侦听，直至信道空闲；如果信道空闲吗，那么以概率p发送数据，以概率1-p推迟到下一个时隙；如果在下一个时隙信道仍然空闲，那么仍以概率p发送数据，以概率1-p推迟到下一个时隙；这个过程一直持续到数据发送成功或因其他结点发送数据而检测到信道忙为止，若是后者，则等待下一个时隙再重新开始侦听。  
  p-坚持CSMA在检测到信道空闲后，以概率p发送数据，以概率1-p推迟到下一个时隙，其目的是降低1-坚持CSMA协议中多个结点检测到信道空闲后同时发送数据的冲突概率；采用坚持侦听的目的是，试图克服非坚持CSMA协议中由于随机等待而造成的延迟时间较长的特点。因此，p-坚持CSMA协议是非坚持CSMA协议和1-坚持CSMA协议的折中方案。  

#### CSMA/CD协议  
载波侦听多路访问/碰撞检测Carrier Sense Multiple Access with Collision Detection,CSMA/CD协议是CSMA协议的改进方案，适用于**总线形网络和半双工网络环境**。“载波侦听”就是发送前先侦听，即每个站在发送数据之前先要检测一下总线上是否有其他站点正在发送数据，若有则暂停不发送数据，等待信道变为空闲时再发送。“碰撞检测”就是边发送边侦听，即适配器边发送数据边检测信道上信号电压的变化情况，以便判断自己在发送数据时其他站点是否也在发送数据。  
CSMA/CD的工作流程可简单概括为“先听后发，边听边发，冲突停发，随机重发”。  
+ 适配器从其父结点获得一个网络层数据报，准备一个以太网帧，并把该帧放到适配器缓冲区中。  
+ 如果适配器侦听到信道空闲，那么它开始传输该帧。如果适配器侦听到信道忙，那么它将等待直至侦听到没有信号能量，然后开始传输该帧。  
+ 在传输过程中，适配器检测到来自其他适配器的信号能量。如果这个适配器传输了整个帧，而没有检测到来自其他适配器的信号能量，那么这个适配器完成该帧的传输。否则，适配器就须停止传输它的帧，取而代之的是一个48比特的拥塞信号。  
+ 在中止（即传输拥塞信号）后，适配器采用截断二进制指数退避算法等待一段随机时间后返回到步骤2。  

总线的传播时延对CSMA/CD的影响很大。设 τ 为单程传播时延。在t=0时，A发送数据，B检测到信道空闲。在t = τ - δ时，A发送的数据还未到B，由于B检测到信道空闲而发送数据。经过时间δ/2后，即在t = τ - δ/2时，A发送的数据和B发送的数据发生碰撞，但这是A和B都不知道。在t = τ时，B检测到碰撞，于是停止发送数据。在t = 2τ - δ时，A检测到碰撞，也停止发送数据。显然，CSMA/CD中的站不可能同时进行发送和接收，因此采用CSMA/CD协议的以太网不可能进行全双工通信，而只能进行半双工通信。  
由以上分析可知，站A在发送帧后至多经过时间2τ就能知道所发送的数据帧是否发生碰撞。因此把以太网到端往返时间2τ称为争用期（又称冲突窗口或碰撞窗口）。每个站在自己发送数据之后的一小段时间内，存在发生冲突的可能性，只有经过争用期这段时间还未检测到冲突时，才能确定这次发送不会发生冲突。  
为了确保发送站在发送数据的同时能检测到可能存在的冲突，需要在发送完帧之前就能收到自己发送出去的数据，即帧的传输时延至少要两倍于信号在总线中的传播时延，所以CSMA/CD总线网中的所有数据帧都必须要大于一个最小帧长。任何站点收到帧长小于最小帧长的帧时，就把它当作无效帧立即丢弃。最小帧长的计算公式为  
最小帧长 = 总线传播时延 × 数据传输率 × 2  
例如，以太网规定取51.2μs为争用期的长度。对于100Mb/s的以太网，在争用期内可发送512bit，即64B。在以太网发送数据时，如果前64B未发生冲突，那么后续数据也就不会发生冲突（表示已成功抢占信道）。换句话说，如果发生冲突，那么就一定在前64B。由于一旦检测到冲突就立即停止发送，因此此时发送出去的数据一定小于64B。因此，以太网规定最短帧长为64B，凡长度小于64B的都是由于冲突而异常终止的无效帧。  
如果只发送小于64B的帧，如40B的帧，那么需要在MAC子层中于数据字段的后面加入一个整数字节的填充字段，以保证以太网的MAC帧的长度不小于64B。  
除检测冲突外，CSMA/CD还能从冲突中恢复。一旦发生了冲突，参与冲突的两个站点紧接着再次发送是没有意义的，如果它们这样做，那么将会导致无休止的冲突。CSMA/CD采用二进制指数退避算法来解决碰撞问题。算法精髓如下：  
+ 确定基本退避时间，一般取两倍的总线端到端传播时延2𝜏(即争用期)  
+ 定义参数k，它等于重传次数；**当重传次数大于10时，k就不再增大而一直等于10**。  
+ 从离散的整数集合[0,1,···,2<sup>k</sup>-1]中随机取出一个数r，重传所需要退避的时间就是r倍的基本退避时间，即2r𝜏。  
+ 当重传达16次仍不能成功时，说明网络太拥挤，认为此帧永远无法正确发出，抛弃此帧并向高层报告出错。  

使用二进制指数退避算法可使重传需要推迟的平均时间随重传次数的增大而增大，因而能降低发生碰撞的概率，有利于整个系统的稳定。  

#### CSMA/CA协议  
CSMA/CD协议已成功应用于使用有线连接的局域网，但在无线局域网环境下，却不能简单地搬用CSMA/CD协议，特别是碰撞检测部分，主要有两个原因：  
+ 接收信号的强度往往会远小于发送信号的强度，且在无线介质上信号强度的动态变化范围很大，因此若要实现碰撞检测，则硬件上的花费就会很大。  
+ 在无线通信中，并非所有的站点都能够听见对方，即存在“隐蔽站”问题。  

为此，802.11标准重新定义了广泛应用于无线局域网的CSMA/CA协议，它对CSMA/CD协议进行了修改，把碰撞检测改为碰撞避免(Collision Avoidance,CA)、“碰撞检测”并不是指协议可以完全避免碰撞，而是指协议的设计要尽量降低碰撞发生的概率。  
CSMA/CA采用二进制指数退避算法。信道从忙态变为空闲时，任何一个站要发送数据帧时，不仅都须等待一个时间间隔，而且还要进入争用窗口，并计算随机退避时间以便再次试图接入信道，因此降低了发生碰撞的概率。当且仅当检测到信道空闲并且这个数据帧是要发送的第一个数据帧时，才使用退避算法。  
CSMA/CA还使用预约信道、ACK帧、RTS/CTS帧等三种机制来实现碰撞避免：  
+ 预约信道  
  发送方在发送数据的同时向其他站点通知自己传输数据需要的时间长度，以便让其他站点在这段时间内不发送数据，从而避免碰撞。  
+ ACK帧  
  所有站点在正确接收到发给自己的数据帧时（除广播帧和组播帧）后，都需要向发送方发回一个ACK帧，如果接收失败，那么不采取任何行动。发送方在发送完一个数据帧后，在规定的时间内如果未收到ACK帧，那么认为发送失败，此时进行该数据帧的重发，直到收到ACK帧或达到规定重发次数为止。  
+ RTS/CTS帧  
  可选的碰撞检测机制，主要用于解决无线网中的“隐蔽站”问题。  

前两者是必须实现的，而RTS/CTS帧是可选的。但后两者又增加了网络流量，所以IEEE802.11无线网络在网络利用率上与类似的以太网相比，性能总是差一点。  
CSMA/CD与CSMA/CA主要有如下区别：  
+ CSMA/CD可以检测冲突，但无法避免；CSMA/CA发送包的同时不能检测到信道上有无冲突，本结点处没有冲突并不意味着在接受结点处就没有冲突，只能尽量避免。  
+ 传输介质不同。CSMA/CD用于总线形以太网，CSMA/CA用于无线局域网802.11a/b/g/n等。  
+ 检测方式不同。CSMA/CD通过电缆中的电压变化来检测；而CSMA/CA采用能量检测、载波检测和能量载波混合检测三种检测信道空闲的方式。  
+ 在本结点处有（无）冲突，并不一定意味着在接收结点处就有（无）冲突。  

总结：CSMA/CA协议的基本思想是在发送数据时先广播告知其他结点，让其他结点在某段时间内不要发送数据，以免出现碰撞。CSMA/CD协议的基本思想是发送前侦听，边发送边侦听，一旦出现碰撞马上停止发送。  

### 轮询访问介质访问控制：令牌传递协议  
在轮询访问中，用户不能随机地发送信息，而要通过一个集中控制的监控站，以循环方式轮询每个结点，再决定信道的分配。当某结点使用信道时，其他结点都不能使用信道。典型的轮询访问介质访问控制协议是令牌传递协议，它主要用在令牌环局域网中。  
在令牌传递协议中，一个令牌在各结点间以某个固定次序交换。令牌是由一组特殊的比特组合而成的帧。当环上的一个站虚妄传送帧时，必须等待令牌。一旦收到令牌，站点便可启动发送帧。帧中包括目的站的地址，以标识哪个站应该接收此帧。帧在环上传送时，不管该帧是否是发给本站的，所有站点都进行转发，直到该帧回到它的始发站，并由该始发站撤销该帧。帧的目的站除转发帧外，应针对该帧维持一个副本，并通过在帧的尾部设置“响应比特”来指示已收到此副本。站点在发送完一帧后，应释放令牌，以便让其他站使用。  
当计算机都不需要发送数据时，令牌就在环形网上游荡，而需要发送数据的计算机只有在拿到该令牌后才能发送数据帧，因此不会发生冲突。  
在令牌传递网络中，传输介质的物理拓扑不必是一个环，但是为了把对介质访问的许可从一个设备传递到另一个设备，令牌在设备间的传递通路逻辑上必须是一个环。  
轮询介质访问控制非常适合负载非常高的广播信道。所谓负载很高的信道，是指多个结点在同一时刻发送数据概率很大的信道。可以想象，如果这样的广播信道采用随机介质访问控制，那么发生冲突的概率将会很大，而采用轮询介质访问控制则可以很好地满足各结点间的通信要求。  
轮询介质访问控制既不共享时间，也不共享空间，它实际上是在随机介质访问控制的基础上，限定了有权力发送数据的结点只能有一个。  
即使是广播信道也可通过介质访问控制机制使广播信道逻辑上变为点对点的信道，所以说数据链路层研究的是“点到点”之间的通信。  

---  
## 局域网  
### 局域网的基本概念和体系结构  
局域网Local Area Network,LAN是指在一个较小的地理范围内，将各种计算机、外部设备和数据库系统等通过双绞线、同轴电缆等连接介质互相连接起来，组成资源和信息共享的计算机互联网络。主要特点如下：  
+ 为一个单位所拥有，且地理范围和站点数目均有限  
+ 所有站点共享较高的总带宽（即较高的数据传输率）  
+ 较低的时延和较低的误码率  
+ 各站为平等关系而非主从关系  
+ 能进行广播和组播  

局域网的特性主要由三个要素决定：拓扑结构、传输介质、介质访问控制方式。其中最重要的是介质访问控制方式，它决定着局域网的技术特性。  
常见的局域网拓扑结构主要有以下4大类：  
+ 星形结构 
+ 环形结构  
+ 总线形结构  
+ 星形和总线形相结合的复合型结构  

局域网可以使用双绞线、铜缆和光纤等多种传输介质，其中双绞线为主流传输介质。  
局域网的介质访问控制方法主要有CSMA/CD、令牌总线和令牌环，其中前两种方法主要用于总线形局域网，令牌环主要用于环形局域网。  
三种特殊的局域网拓扑结构如下：  
+ 以太网（目前使用范围最广的局域网）。逻辑拓扑是总线形结构，物理拓扑是星形或扩展星形结构。  
+ 令牌环Token Ring，IEEE802.5。逻辑拓扑是环形结构，物理拓扑是星形结构。  
+ FDDI光纤分布数字接口，IEEE802.8。逻辑结构是环形结构，物理拓扑是双环结构。  

IEEE802标准定义的局域网参考模型只对应于OSI参考模型的数据链路层和物理层，并将数据链路层拆分为两个子层：逻辑链路控制LLC子层和媒体接入控制MAC子层。与接入传输媒体有关的内容都放在MAC子层，它向上层屏蔽对物理层访问的各种差异，提供对物理层的统一访问接口，主要功能包括：组帧和拆卸帧、比特传输差错控制、透明传输。LLC子层与传输媒体无关，它向网络层提供无确认无连接、面向连接、带确认无连接、高速传送4种不同的连接服务类型。  

由于以太网在局域网市场中取得垄断地位，几乎成为局域网的代名词，而802委员会制定的LLC子层作用已经不大，因此现在许多网卡仅装有MAC协议而没有LLC协议。  

### 以太网与IEEE802.3  
IEEE802.3标准是一种基带总线形的局域网标准，它描述物理层和数据链路层的MAC子层的实现方法。随着技术的发展，该标准又有大量的补充与更新，以支持更多的传输介质和更高的传输率。  
以太网逻辑上采用总线形拓扑结构，以太网中的所有计算机共享同一条总线，信息以广播方式发送。为了保证数据通信的方便性和可靠性，以太网简化了通信流程并使用了CSMA/CD方式对总线进行访问控制。  
严格来说，以太网应当是指符合DIX Ethernet V2标准的局域网，但DIX Ethernet V2标准与IEEE802.3标准只有很小的差别，因此通常将802.3局域网简称为以太网。  
以太网采用两项措施简化通信：采用无连接的工作方式；不对发送的数据帧编号，也不要求接收方发送确认，即以太网尽最大努力交付数据，提供的是不可靠服务，对于差错的纠正则由高层完成。  

#### 以太网的传输介质与网卡  
以太网常用的传输介质有4种：粗缆、细缆、双绞线和光纤。各种传输介质的适用情况如下：  

|参数|10BASE5|10BASE2|10BASE-T|10BASE-FL|  
|---|---|---|---|---|  
|传输媒体|基带同轴电缆（粗缆）|基带同轴电缆（细缆）|非屏蔽双绞线|光纤对850nm|  
|编码|曼彻斯特编码|曼彻斯特编码|曼彻斯特编码|曼彻斯特编码|  
|拓扑结构|总线形|总线形|星形|点对点|  
|最大段数|500m|185m|100m|2000m|  
|最多结点数目|100|30|2|2|  

计算机与外界局域网的连接是通过主机箱内插入的一块网络接口板【又称网络适配器Adapter或网络接口卡Network Interface Card,NIC】实现的。网卡上装有处理器和存储器，是工作在数据链路层的网络组件。网卡是局域网中连接计算机和传输介质的接口，不仅能实现与局域网传输介质之间的物理连接和电信号匹配，还涉及帧的发送与接收、帧的封装与拆封、介质访问控制、数据的编码与解码即数据缓存功能等。  
全世界的每块网卡在出厂时都有一个唯一的代码，称为介质访问控制MAC地址，这个地址用于控制主机在网络上的数据通信。数据链路层设备（网桥、交换机）都使用各个网卡的MAC地址。另外，网卡控制着主机对介质的访问，因此网卡也工作在物理层，因为它只关注比特，而不关注任何地址信息和高层协议信息。  

#### 以太网的MAC帧  
每块网络适配器（网卡）都有一个地址，称为MAC地址，也称物理地址；MAC地址长6字节，一般用有连字符（或冒号）分隔的6个十六进制数表示，如30:52:CB:AF:05:E1。高24位为厂商代码，低24位为厂商自行分配的网卡序列号。  
由于总线上使用的是广播通信，因此网卡从网络上每收到一个MAC帧，首先要用硬件检查MAC帧中的MAC地址。如果是发往本站的帧，那么就收下，否则丢弃。  
以太网MAC帧格式有两种标准：DIX Ethernet V2标准（即以太网V2标准）和IEEE 802.3标准。  
以太网V2的MAC帧格式：  

|`前同步码7B`|`帧开始定界符1B`|目的地址6B|源地址6B|类型2B|数据（IP数据报）46~1500B|FCS4B|  
|---|---|---|---|---|---|---|  

前导码：使接收端与发送端时钟同步。在帧前面插入8字节可再分为两个字段：第一个字段共7字节，是前同步码，用来快速实现MAC帧的比特同步；第二个字段是帧开始定界符，表示后面的信息就是MAC帧。  
**MAC帧并不需要帧结束符，因为以太网在传送帧时，各帧之间必须有一定的间隙。因此，接收端只要找到帧开始定界符，其后面连续到达的比特流就都属于同一个MAC帧。**  
地址：通常使用6字节地址。  
类型：2字节，指出数据域中携带的数据应交给哪个协议实体处理。  
数据：46-1500字节，包含高层的协议信息。由于CSMA/CD算法的限制，以太网帧必须满足最小长度要求64字节，数据较少时必须加以填充。  
填充：0-46字节，当帧太短时填充帧，使之达到64字节的最小长度。  
检验码FCS：4字节，检验范围从目的地址段到数据段的末尾，算法采用32位循环冗余码CRC，不但需要校验MAC帧的数据部分，还要校验目的地址、源地址和类型字段，但不校验前导码。  
802.3帧格式和DIX以太帧格式的不同之处在于用长度域替代了DIX帧中的类型域，指出数据域的长度。在实践中，前述长度/类型两种机制可以并存，由于IEEE 802.3数据段的最大字节数是1500，所以长度段的最大值为1500，因此从1501到65535（共两字节）的值可用于类型段标识符。  

#### 高速以太网  
速率达到或超过100Mb/s的以太网称为高速以太网。  
+ 100BASE-T以太网  
  100BASE-T以太网是在双绞线上传送100Mb/s的基带信号的星形拓扑结构以太网，它使用CSMA/CD协议。这种以太网既支持全双工方式，右支持半双工方式，可在全双工方式下工作而无冲突发生。因此，在全双工方式下不使用CSMA/CD协议。  
  MAC帧格式仍然是802.3标准规定的。保持最短帧长不变，但将一个网段的最大电缆长度减小到100m。帧间时间间隔从原来的9.6μs改为现在的0.96μs。  

+ 吉比特以太网  
  吉比特以太网又称千兆以太网，允许在1Gb/s下用全双工和半双工两种方式工作。使用802.3协议规定的帧格式。在半双工方式下使用CSMA/CD协议。与10BASE-T和100BASE-T技术向后兼容。  

+ 10吉比特以太网  
  10吉比特以太网与10Mb/s、100Mb/s和1Gb/s以太网的帧格式完全相同。10吉比特以太网还保留了802.3标准规定的以太网最小和最大帧长，便于升级。10吉比特以太网不再使用铜线而只使用光纤作为传输媒体。10吉比特以太网只工作在全双工方式，因此没有争用问题，也不使用CSMA/CD协议。  
  