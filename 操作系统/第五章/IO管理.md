# 输入/输出(I/O)管理  
## I/O管理概述  
### I/O设备  
I/O设备是操作系统设计中最凌乱也最具挑战的部分。由于它包含了很多领域的不同设备及与设备相关的应用程序，因此很难有一个通用且一致的设计方案。I/O设备分类：  
+ 计算机中的I/O设备按照使用特性可分为以下类型  
  - 人机交互类外部设备。  
  用于与计算机用户之间交互的设备，如打印机、显示器、鼠标、键盘等。这类设备的数据交换速度相对较慢，通常是以字节为单位进行数据交换的。  
  - 存储设备  
  用于存储程序和数据的设备，如磁盘、磁带、光盘等。这类设备用于数据交换，速度较快，通常以多字节组成的块为单位进行数据交换。  
  - 网络通信设备  
  用于与远程设备通信的设备，如各种网络接口。调制解调器等。其速度介于前两类设备之间。网络通信设备在使用和管理上与前两类设备也有很大不同。  
+ 按传输速率分类  
  - 低速设备  
  传输速率仅为每秒几字节到数百字节的一类设备，如键盘、鼠标等。  
  - 中速设备  
  传输速率为每秒数千字节到数万字节的一类设备，如行式打印机、激光打印机等。  
  - 高速设备  
  传输速率在数百千字节到千兆字节的一类设备，如磁带机、磁盘机、光盘机等。  
+ 按信息交换的单位分类  
  - 块设备  
  由于信息的存取总是以数据块为单位的，所以存储信息的设备称为块设备。它属于有结构设备，如磁盘等。磁盘设备的基本特征是传输速率较高、可寻址，即对它可随机地读/写任一块。  
  - 字符设备  
  用于数据输入/输出的设备为字符设备，因为其传输的基本单位是字符。它属于无结构的类型，如交互式终端机、打印机等。它们的基本特征是传输速率低、不可寻址，并且在输入/输出时常采用中断驱动方式。  
### I/O控制方式  
设备管理的主要任务之一是控制设备和内存或处理机之间的数据传送。外围设备和内存之间的输入/输出控制方式有4种：  
1. 程序直接控制方式  
计算机从外部设备读取数据到存储器，每次读一个字的数据。对读入的每个字，CPU需要对外设状态进行循环检查，直到确定该字已经在I/O控制器的数据寄存器中。在程序直接控制方式中，由于CPU的高速性和I/O设备的低速性，致使CPU的绝大部分时间都处于等待I/O设备完成数据I/O的循环测试中，造成了CPU资源的极大浪费。在该方式中，CPU之所以要不断地测试I/O设备的状态，就是因为在CPU中未采用中断机构，是I/O设备无法向CPU报告它已完成了一个字符的输入操作。  
程序直接控制方式虽然简单且易于实现，但其缺点也显而易见，由于CPU和I/O设备只能串行工作，导致CPU的利用率相当低。  
2. 中断驱动方式  
中断驱动方式的思想是，允许I/O设备主动打断CPU的运行并请求服务，从而解放CPU，使得其向I/O控制器发送读命令后可以继续做其他有用的工作。  
从I/O控制器的角度来看，I/O控制器从CPU接收一个读命令，然后从外围设备读数据。一旦数据读入该I/O控制器的数据寄存器，便通过控制线给CPU发出一个中断信号，表示数据已准备好，然后等待CPU请求该数据。I/O控制器收到CPU发出的数据请求后，将数据放到数据总线上，传到CPU的寄存器中。至此，本次I/O操作完成，I/O控制器又可以开始下一次I/O操作。  
从CPU的角度来看，CPU发出读命令，然后保存当前运行程序的上下文（现场、包括程序计数器及处理机寄存器），转去执行其他程序。在每个指令周期的末尾，CPU检查中断。当有来自I/O控制器的中断时，CPU保存当前正在运行程序的上下文，转去执行中断处理程序以处理该中断。这时，CPU从I/O控制器读一个字的数据传送到寄存器，并存入主存。接着，CPU恢复发出I/O命令的程序（或其他程序）的上下文，然后继续运行。  
中断驱动方式比程序直接控制方式有效，但由于数据中的每个字在存储器与I/O控制器之间的传输都必须经过CPU，这就导致了中断驱动方式仍然会消耗比较多的CPU时间。  
3. DMA方式  
在中断驱动方式中，I/O设备与内存之间的数据交换必须要经过CPU中的寄存器，所以速度还是受限，而DMA（直接存储器存取）方式的基本思想是在I/O设备和内存之间开辟直接的数据交换通路，彻底解放CPU。DMA方式的特点如下：  
+ 基本单位是数据块  
+ 新传送的数据，是从设备直接送入内存的，或者相反。  
+ 尽在传送一个或多个数据块的开始和结束时，才需CPU干预，整块数据的传送是在DMA控制器的控制下完成的。  
**为了在主机和控制器之间实现成块数据的直接交换，必须在DMA控制器中设置如下四类寄存器**：  
+ 命令/状态寄存器CR  
用于接收从CPU发来的I/O命令或有关控制信息，或设备的状态。  
+ 内存地址寄存器MAR  
在输入时，它存放把数据从设备传送到内存的起始目标地址；在输出时，它存放由内存到设备的内存源地址。  
+ 数据寄存器DR  
用于暂存从设备到内存或从内存到设备的数据。  
+ 数据寄存器DC  
存放本次要传送的字（节）数。  
**DMA方式的工作过程是：CPU接收到I/O设备的DMA请求时，它给I/O控制器发出一条命令，启动DMA控制器，然后继续其他工作。之后CPU就把控制操作委托给DMA控制器，由该控制器负责处理。DMA控制器直接与存储器交互，传送整个数据块，每次传送一个字，这个过程不需要CPU参与。传送完成后，DMA控制器发送一个中断信号给CPU。** 因此只有在传送开始和结束才需要CPU的参与。  
DMA控制器与中断驱动方式的主要区别是，中断驱动方式在每个数据需要传输时中断CPU，而DMA控制方式则是在所要求传送的一批数据全部传送完成时才中断CPU；此外，中断驱动数据传送是在中断处理时由CPU控制完成的，若DMA控制方式则是在DMA控制器的控制下完成的。  
4. 通道控制方式  
I/O通道是指专门负责输入/输出的处理机，I/O通道方式是DMA方式的发展，它可以进一步减少CPU的干预，即把对一个数据块的读（或写）为单位的干预，减少为对一组数据块的读（或写）及有关控制和管理为单位的干预。同时，又可以实现CPU、通道和I/O设备三者的并行操作，从而更有效地提高整个系统的资源利用率。  
当CPU要完成一组相关的读/写操作或有关控制时，只需向I/O通道发送一条I/O指令，以给出其所要执行的通道程序的首地址和要访问的I/O设备，通道接到该指令后，执行通道程序便可完成CPU指定的I/O任务，数据传送结束时向CPU发中断请求。  
I/O通道与一般处理机的区别是：通道指令的类型单一，没有自己的内存，通道所执行的通道程序是放在主机的内存中的，也就是说通道和CPU共享内存。  
I/O通道和DMA方式的区别是：DMA方式需要CPU来控制传输的数据块大小、传输的内存位置，而通道方式中这些信息都是由通道控制的。另外，每个DMA控制器对应一台设备与内存传递数据，而一个通道可以控制多台设备与内存的数据交换。  
### I/O子系统的层次结构  
I/O软件设计的面非常广，往下与硬件有着密切的联系，往上又与用户直接交互，它与进程管理、存储器管理、文件管理等都存在着一定的联系，即它们都可能需要I/O软件来实现I/O操作。  
为了使复杂的I/O软件具有清晰的结构、良好的移植性和适应性，在I/O软件中普遍采用了层次式结构，将系统输入/输出功能组织成一系列的层次，每层都利用其下层提供的服务，完成输入/输出功能中的某些子功能，并屏蔽这些功能的细节，向高层提供服务。在层次式结构的I/O软件中，只要层次间的接口不变，对某一层次中的软件的修改都不会引起其下层或高层代码的变更，仅低层才涉及硬件的具体特性。  
整个I/O系统可以视为具有四个层次的系统结构。各层次及其功能如下：  
1. 用户层I/O软件  
实现与用户交互的接口，用户可直接调用在用户层提供的、与I/O操作有关的库函数，对设备进行操作。  
一般而言，大部分的I/O软件都在操作系统内部，但仍有一小部分在用户层，包括与用户程序链接在一起的库函数，以及完全运行于内核之外的一些程序。用户层软件必须通过一组系统调用来获取操作系统服务。  
2. 设备独立性软件  
用于实现用户程序与设备驱动器的统一接口、设备命令、设备保护及设备分配与释放等，同时为设备管理和数据传送提供必要的存储空间。  
设备独立性也称设备无关性，使得应用程序独立于具体使用的物理设备。为实现设备独立性，而引入了逻辑设备和物理设备这两个概念。在应用程序中，使用逻辑设备来请求使用某类设备，而在系统实际执行时，必须将逻辑设备名映射成物理设备名使用。  
使用逻辑设备名的好处是：①增加设备分配的灵活性②易于实现I/O重定向，所谓I/O重定向，是指用于I/O操作的设备可以更换（即重定向），而不必改变应用程序。  
为了实现设备独立性，必须再在驱动程序之上设置一层设备独立性软件。总体而言，设备独立性软件的主要功能可分为以下两个方面：  
+ 执行所有设备的公有操作  
包括：对设备的分配与回收；将逻辑设备名映射为物理设备名；对设备进行保护，禁止用户直接访问设备；缓冲管理；差错控制；提供独立于设备的大小统一的逻辑块，屏蔽设备之间信息交换单位大小和传输速率的差异。  
+ 向用户层（或软件层）提供同一接口。无论何种设备，它们向用户所提供的接口应是相同的。例如，对各种设备的读/写操作，在应用程序中都统一使用read、write命令等。  
3. 设备驱动程序  
与硬件直接相关，负责具体实现对设备发出的操作指令，驱动I/O设备工作的驱动程序。  
通常，为每类设备配置一个设备驱动程序，它是I/O进程与设备控制器之间的通信程序，常以进程形式存在。设备驱动程序向上层用户程序提供一组标准接口，设备具体的差别被设备驱动程序所封装，用于接受上层软件发来的抽象I/O要求，如read和write命令，转换为具体要求后，发送给设备控制器，控制I/O设备工作；它也将由设备控制器发来的信号传送给上层软件，从而为I/O内核子系统隐藏设备控制器之间的差异。  
4. 中断处理程序  
用于保存被中断进程的CPU环境，转入相应的中断处理程序进行处理，处理完并恢复被中断进程的现场后，返回到被中断进程。  
中断处理层的主要任务有：进行进程上下文切换，对处理中断信号源进行测试，读取设备状态和修改进程状态等。由于中断处理与硬件紧密相关，对用户而言，应尽量加以屏蔽，故应放在操作系统的底层，系统的其余部分尽可能少地与之发生联系。  
5. 硬件设备  
I/O设备通常包括一个机械部件和一个电子部件。为了达到设计的模块性和通用性，一般将其分开：电子部件称为设备控制器（或适配器），在个人计算机中，通常是一块插入主板扩充槽的印刷电路板；机械部件则是设备本身。  
设备控制器通过寄存器与CPU通信，在某些计算机上，这些寄存器占用内存地址的一部分，称为内存映像I/O；另一些计算机则采用I/O专用地址，寄存器独立编址。操作系统通过向控制器写命令字来执行I/O功能。控制器收到一条命令后，CPU可以专项进行其他工作，而让设备控制器自行完成具体的I/O操作。当命令执行完毕后，控制器发出一个中断信号，操作系统重新获得CPU的控制权并检查执行结果，此时，CPU仍旧从控制器寄存器中读取信息来获得执行结果和设备的状态信息。  
设备控制器的主要功能如下：  
+ 接收和识别CPU或通道发来的命令，如磁盘控制器能接收读、写、查找等命令。  
+ 实现数据交换，包括设备和控制器之间的数据传输；通过数据总线或通道，控制器和主存之间的数据传输。  
+ 发现和记录设备及自身的状态信息，供CPU处理使用。  
+ 设备地址识别。  
为了实现上述功能。设备控制器必须包含以下组成部分：  
+ 设备控制器和CPU的接口  
该接口有三类线：数据线、地址线和控制线。数据线通常与两类寄存器相连：数据寄存器（存放从设备送来的输入数据或从CPU送来的输出数据）和控制/状态寄存器（存放从CPU送来的控制信息及设备的状态信息）。  
+ 设备控制器与设备的接口  
设备控制器连接设备需要相应数量的接口，一个接口连接一台设备。每个接口中都存在数据、控制和状态三种类型的信号。  
+ I/O控制逻辑  
用于实现对设备的控制。它通过一组控制线和CPU交互，对从CPU收到的I/O命令进行译码。CPU启动设备时，将启动命令发送给控制器，同时通过地址线把地址发送给控制器，由控制器的I/O逻辑对地址进行译码，并相应地对所选设备进行控制。  

---
## I/O核心子系统  
### I/O子系统概述  
由于I/O设备种类繁多，功能和速率差异巨大，因此需要多种方法来进行设备控制。这些方法共同组成了操作系统内核的I/O子系统，它将内核的其他方面从繁重的I/O设备管理中解放出来。I/O核心子系统提供的服务主要有I/O调度、缓冲与高速缓存、设备分配与回收、假脱机、设备保护和差错处理等。  
### I/O调度概念  
I/O调度就是确定好一个好的顺序来执行这些I/O请求。应用程序所发布的系统调用的顺序不一定总是最佳选择，所以需要I/O调度来改善系统整体性能，使进程之间公平地共享设备访问，减少I/O完成所需要的平均等待时间。  
操作系统开发人员通过为每个设备维护一个请求队列来实现调度。当一个应用程序执行阻塞I/O系统调用时，该请求就加到相应设备的队列上。I/O调度会重新安排队列顺序，以改善系统总体效率和应用程序的平均响应时间。  
I/O子系统还可用于主存或磁盘上的存储空间的技术，如缓冲、高速缓存、假脱机等来改善计算机效率。  
### 高速缓存与缓冲区  
1. 磁盘高速缓存Disk Cache  
操作系统中使用磁盘高速缓存技术来提高磁盘的I/O速度，对高速缓存复制的访问要比原始数据访问更为高效。例如，正在运行的进程的指令既存储在磁盘上，又存储在物理内存上，也被复制到CPU的二级和一级高速缓存中。  
不过，磁盘高速缓存技术不同于通常意义下的介于CPU与内存之间的小容量高速存储器，而是指利用内存中的存储空间来暂存从磁盘中读出的一系统盘块中的信息。因此，磁盘高速缓存逻辑上属于磁盘，物理上则是驻留在内存中的盘块。  
高速缓存在内存中分为两种形式：一种是在内存中开辟一个单独的存储空间作为磁盘高速缓存，大小固定；另一种是把未利用的内存空间作为一个缓冲池，供请求分页系统和磁盘I/O时共享。  
2. 缓冲区Buffer  
在设备管理子系统中，引入缓冲区的目的主要如下：  
+ 缓和CPU和I/O设备间速度不匹配的矛盾  
+ 减少CPU的中断频率，放宽对CPU中断响应时间的限制  
+ 解决基本数据单元大小（即数据粒度）不匹配的问题  
+ 提高CPU和I/O设备之间的并行性  
其实现方法如下：  
+ 采用硬件缓冲器，但由于成本太高，除一些关键部位外，一般不采用硬件缓冲器  
+ 采用缓冲区（位于内存区域）  
缓冲区有一个特点，即当缓冲区的数据为非空时，不能往缓冲区里写入数据，只能从缓冲区把数据传出；放缓冲区为空时，可以往缓冲区写入数据，但必须把缓冲区放满后，才能从缓冲区把数据传出。  
根据系统设置缓冲器的个数，缓冲技术可以分为如下几种：  
+ 单缓冲  
在设备和处理机之间设置一个缓冲区。设备和处理机交换数据时，先把被交换的数据写入缓冲区，然后需要数据的设备或处理机从缓冲区取走数据。  
+ 双缓冲  
在设备和处理机之间设置两个缓冲区。设备和处理机交换数据时，可往一个缓冲区写入数据的同时从另一个缓冲区读出数据。双缓冲机制提高了处理机和输入设备的并行操作的程度。  
+ 循环缓冲  
包含多个大小相等的缓冲区，每个缓冲区中有一个链接指针指向下一个缓冲区，最后一个缓冲区指向第一个缓冲区，多个缓冲区构成一个环形。  
循环缓冲用于输入/输出时，还需要有两个指针in和out。对输入而言，首先要从设备接收数据到缓冲区，in指针指向可以输入数据的第一个空缓冲区；当运行进程需要数据时，从循环缓冲区中取出一个装满数据的缓冲区，并从次缓冲区中提取数据，out指针指向可以提取数据的第一个满缓冲区。输出则正好相反。  
+ 缓冲池  
由多个系统公用的缓冲区组成，缓冲区按照其使用状况可以形成三个队列：空缓冲队列、装满输入数据的缓冲队列（输入队列）和装满输出数据的缓冲队列（输出队列）。还应具有四种缓冲区：用于收容输入数据的工作缓冲区、用于提取输入数据的工作缓冲区、用于收容数据输出的工作缓冲区及用于提取输出数据的缓冲区。  
当输入进程需要输入数据时，便从空缓冲队列的队首摘下一个空缓冲区，把它作为收容输入工作缓冲区，然后把输入数据输入其中，装满后再把它挂到输入队列队尾。当计算进程需要输入数据时，便从输入队列取得一个缓冲区作为提取输入工作缓冲区，计算进程从中提取数据，数据用完后再把它挂到空缓冲队列队尾。当计算进程需要输出数据时，便从空缓冲队列的队首取得一个空缓冲区，作为收容输出工作缓冲区，当其中装满输出数据后，再将它挂到输出队列队尾。当要输出时，由输出进程从输出队列中取得一个装满数据的缓冲区，作为提取输出工作缓冲区，当数据提取完后，再将它挂到空缓冲队列的队尾。  
3. 高速缓存与缓冲区的对比  
高速缓存是可以保存数据拷贝的高速存储器，访问高速缓存比访问原始数据更高效，速度更快。  
### 设备分配与回收  
1. 设备分配概述  
设备分配是根据用户的I/O请求分配所需的设备。分配的总原则是充分发挥设备的使用效率，尽可能地让设备忙碌，又要避免由于不合理的分配方法造成进程死锁。从设备的特性来看，采用下述三种使用方式的设备分别称为独占设备、共享设备和虚拟设备。  
+ 独占式使用设备  
指在申请设备时，若设备空闲，则将其独占，不再允许其他进程申请使用，一直等到该设备被释放才允许其他进程申请使用。  
+ 分时式共享使用设备  
独占式设备使用时，设备利用率很低，当设备没有独占使用的要求时，可以通过分时共享使用提高利用率。例如，对磁盘设备的I/O操作，各进程的每次I/O操作请求可以通过分时来交替进行。  
+ 以SPOOLing方式来使用外部设备  
SPOOLing(Simultaneous Peripheral OperatI/On On-Line)技术是在批处理操作系统时代引入的，即假脱机I/O技术。这种技术用于对设备的操作，实质上就是对I/O操作进行批处理。SPOOLing技术实质上是一种以空间换时间的技术。  
2. 设备分配的数据结构  
设备分配依据的主要数据结构有设备控制表（DCT）。控制器控制表（COCT）、通道控制表（CHCT）和系统分配表（SDT），各数据结构功能如下：  
+ 设备控制表  
可以认为，一个设备控制表就表征一个设备，而这个控制表中的表项就是设备的各个属性。  
每个设备都分为机械部件和电子部件两部分，其中负责解析上层传达的命令并控制机械部件运作的是电子部件（控制器），所以每个设备控制表都需要一个表项来表示控制器，即需要一个指向控制器控制表的指针，因此DCT和COCT有一一对应的关系。  
由于通道控制方式的优越性，所以现代操作系统的I/O控制采用的都是通道控制。设备控制器控制设备与内存交换数据，而设备控制器又需要请求通道为它服务，因此每个COCT必定有一个表项存放指向相应通道控制表（CHCT）的指针，而一个通道可以为多个设备控制器服务，因此CHCT中必定有一个指针，指向一个表，这个表上的信息表达的是CHCT提供服务的那几个设备控制器。CHCT与COCT的关系是一对多的关系。  
整个系统中就一张系统分配表，它记录已连接到系统中的所有物理设备的情况，每个物理设备独占一个表目。  
3. 设备分配的策略  
由于在多道系统中，进程多于资源数，会引起资源的竞争，因此要有一套合理的分配原则，主要考虑的因素有：I/O设备的固有属性、I/O设备的分配算法、I/O设备分配的安全性以及I/O设备的独立性。  
+ 设备分配原则  
设备分配应根据设备特性、用户要求和系统配置情况。分配的总原则是：既要充分发挥设备的使用效率，又要避免造成进程死锁，还要将用户程序和具体设备隔离开。  
+ 设备分配方式  
设备分配有静态分配和动态分配两种。  
  - 静态分配主要用于对独占设备的分配，它在用户作业开始执行前，由系统一次性分配该作业所要求的全部设备、控制器（如通道等）。一旦分配，这些设备、控制器（和通道）就一直为该作业所占用，直到该作业被撤销。静态分配方式不会出现死锁，但设备的使用效率低。因此，静态分配方式并不符合分配的总原则。  
  动态分配在进程执行过程中根据执行需要进行。当进程需要设备时，通过系统调用命令向系统提出设备请求，由系统按照事先规定的策略给进程分配所需要的设备、I/O控制器，一旦用完，便立即释放。动态分配方式有利于提高设备的利用率，但若分配算法使用不当，则有可能造成进程死锁。  
+ 设备分配算法  
常用的动态设备分配算法有先请求先分配、优先级高者优先等。  
对于独占设备，既可以采用动态分配方式，又可以采用静态分配方式，但往往采用静态分配方式，即在作业执行前，将作业所需要的这一类设备分配给它。共享设备可被多个进程所共享，一般采用动态分配方式，但在每个I/O传输的单位时间内只被一个进程所占有，通常采用先请求先分配和优先级高者优先的分配算法。  
4. 设备分配的安全性  
设备分配的安全性是指设备分配中应防止发生进程死锁。  
+ 安全分配方式  
每当进程发出I/O请求后便进入阻塞态，直到其I/O操作完成时才将其唤醒。这样，一旦进程已经获得某种设备后便阻塞，不能再请求任何资源，而且在它阻塞时也不保持任何资源。优点是设备分配安全；缺点是CPU和I/O设备是串行工作的（对同一进程而言）。  
+ 不安全分配方式  
进程在发出I/O请求后继续运行，需要时又发出第二个、第三个I/O请求等。仅当进程所请求的设备被另一个进程占用时，才进入阻塞态。优点是一个进程可同时操作多个设备，从而迅速推进进程；缺点是这种设备分配有可能产生死锁。  
5. 逻辑设备名到物理设备名的映射  
为了提高设备分配的灵活性和设备的利用率，方便实现I/O重定向，引入了设备独立性。设备独立性是指应用程序独立于具体使用的物理设备。  
为了实现设备独立性，在应用程序中使用逻辑设备名来请求使用某类设备，而系统中设置一张逻辑设备表（Logical Unit Table,LUT），用于将逻辑设备名映射为物理设备名。LUT表项包括逻辑设备名。物理设备名和设备驱动程序入口地址；当进程用逻辑设备名来请求分配设备时，系统为它分配相应的物理设备，并在LUT中建立一个表项，以后进程再利用逻辑设备名请求I/O操作时，系统通过查找LUT来寻找相应的物理设备和驱动程序。  
在系统中可采用两种方式建立逻辑设备表：  
+ 在整个系统中只设置一张LUT。这样，所有进程的设备分配情况都记录在这张表中，故不允许有相同的逻辑设备名。主要适用于单用户系统。  
+ 为每个用户设置一张LUT。当用户登录时，系统便为该用户建立一个进程，同时也为之建立一张LUT，并把该表放入进程的PCB。  
### SPOOLing技术（假脱机技术）  
为了缓和CPU的高速性和I/O设备的低速性之间的矛盾，引入了脱机输入/输出技术。该技术利用专门的外围控制机，将低速I/O设备上的数据传送到高速磁盘上，或者相反。SPOOLing的意思是外部设备同时联机操作，又称假脱机输入/输出操作，是操作系统中采用的一项将独占设备改造成共享设备的技术。  
SPOOLing系统的组成：  
1. 输入井和输出井  
输入井和输出井是指在**磁盘**上开辟出的两个存储区域。输入井模拟脱机输入时的键盘，用于收容I/O设备输入的数据。输出井模拟脱机输出时的磁盘，用于收容用户程序的输出数据。  
2. 输入缓冲区和输出缓冲区  
输入缓冲区和输出缓冲区是指在**内存**中开辟的两个缓冲区。输入缓冲区用于暂存由输入设备送来的数据，以后再传送到输入井。输出缓冲区用于暂存从输出井送来的数据，以后再传送到输出设备。  
SPOOLing系统的主要特点有：提高了I/O速度；将独占设备改造为共享设备；实现了虚拟设备功能。