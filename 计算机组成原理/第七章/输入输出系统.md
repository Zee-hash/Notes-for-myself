# 输入/输出系统  
---  
## I/O系统基本概念  
### 输入/输出系统  
输入/输出是以主机为中心而言的，将信息从外部设备传送到主机称为输入，反之称为输出。输入/输出系统解决的主要问题是对各种形式的信息进行输入和输出的控制。  
I/O系统中的几个基本概念如下：  
+ 外部设备。包括输入/输出设备及通过输入/输出接口才能访问的外存储设备。  
+ 接口。在各个外设和主机之间传输数据时进行各种协调工作的逻辑部件。协调包括传输过程中速度的匹配、电平和格式转换等。  
+ 输入设备。用于向计算机系统输入命令和文本、数据等信息的部件。键盘和鼠标是最基本的输入设备。  
+ 输出设备。用于将计算机系统中的信息输出到计算机外部进行显示、交换等的部件。显示器和打印机是最基本的输出设备。  
+ 外存设备。指除计算机内存及CPU缓存等外的存储器。硬磁盘、光盘等是最基本的外存设备。  

一般来说，I/O系统由I/O软件和I/O硬件两部分构成：  
+ I/O软件。包括驱动程序、用户程序、管理程序、升级补丁等。通常采用I/O指令和通道指令实现CPU和I/O设备的信息交换。  
+ I/O硬件。包括外部设备、设备控制器和接口、I/O总线等。通过设备控制器来控制I/O设备的具体动作；通过I/O接口与主机（总线）相连。  

### I/O控制方式  
在输入/输出系统中，经常需要进行大量的数据传输，而传输过程中有各种不同的I/O控制方式，基本的控制方式主要有以下4种：  
+ 程序查询方式。由CPU通过程序不断查询I/O设备是否已做好准备，从而控制I/O设备与主机交换信息。  
+ 程序控制方式。只有I/O设备准备就绪并向CPU发出中断请求时才予以响应。  
+ DMA方式。主存和I/O设备之间有一条直接数据通路，当主存和I/O设备交换信息时，无须调用中断服务程序。  
+ 通道方式。在系统中设有通道控制部件，每个通道都挂接若干外设，主机在执行I/O命令时，只需启动有关通道，通道将执行通道程序，从而完成I/O操作。  

---  
## 外部设备  
外部设备也称外围设备，是除主机外的能直接与计算机交换信息的装置。最基本的外部设备主要有键盘、鼠标、显示器、打印机、磁盘存储器和光盘存储器等。  
### 输入设备  
#### 键盘  
键盘是最常用的输入设备，通过它可发出命令或输入数据。  
键盘通常以矩阵的形式排列按键，每个键用符号标明其含义和作用。每个键相当于一个开关，按下键时，电信号连通；松开键时，弹簧弹起键，电信号断开。  
键盘输入信息可分为3个步骤：  
+ 查出按下的是哪个键  
+ 将该键翻译成能被主机接收的编码  
+ 将编码传送给主机  
#### 鼠标  
鼠标是常用的定位输入设备，它把用户的操作与计算机屏幕上的位置信息相联系。常用的鼠标有机械式和光电式两种。  
工作原理：鼠标在平面上移动时，其底部的传感器把运动的方向和距离检测出来，从而控制光标做相应的运动。  
### 输出设备  
#### 显示器  
显示器种类繁多，按显示设备所用的显示器件分类，有阴极射线管CRT显示器、液晶显示器LCD、发光二极管LED显示器等。按所显示的信息内容分类，有字符显示器、图形显示器和图像显示器3大类。显示器属于用点阵方式运行的设备，有以下主要参数。  
屏幕大小：以对角线长度表示，常用的有12~29英寸等。  
分辨率：所能表示的像素个数，屏幕上的每个光点就是一个像素，以宽和高的像素数的乘积表示，如800×600、1024×768和1280×1024等。  
灰度级：灰度级是指黑白显示器中所显示的像素点的亮暗差别，在彩色显示器中则表现为颜色的不同，灰度级越多，图像层次越清楚、逼真，典型的有8位（256级）、16位等。  
刷新：光点只能保持极短的时间便会消失，为此必须在光点消失之前再重新扫描显示一遍，这个过程称为刷新。  
刷新频率：指单位时间内扫描整个屏幕内容的次数。按照人的视觉生理，刷新频率大于30Hz时才不会感到闪烁，通常显示器的刷新频率为60Hz~120Hz。  
显示存储器VRAM：也称刷新存储器，为了不断提高刷新图像的信号，必须把一帧图像信息存储在刷新存储器中。其存储容量由图像的分辨率和灰度级决定，分辨率越高，灰度级越多，刷新存储器容量越大。  
VRAM容量=分辨率×灰度级位数  
VRAM带宽=分辨率×灰度级位数×帧频  
+ 阴极射线管CRT显示器  
  CRT显示器主要由电子枪、偏转线圈、荫罩、高压石墨电极、荧光粉涂层和玻璃外壳组成，具有可视角度大、无坏点、色彩还原度高、色彩均匀、可调节的多分辨率模式、响应时间极短等目前LCD难以超过的优点。  
+ 液晶显示器  
  原理：利用液晶的电光效应，由图像信号电压直接控制薄膜晶体管，再间接控制液晶分子的光学特性来实现图像的显示。  
  特点：体积小、质量轻、省电、无辐射、绿色环保、画面柔和、不伤眼等。  
+ LED显示器  
  原理：通过控制半导体发光二极管来显示文字、图形、图像等各种信息。  
  LCD和LED是两种不同的显示技术。LCD是由液态晶体组成的显示屏，而LED是由发光二极管组成的显示屏。与LCD相比，LED显示器在亮度、功耗、可视角度和刷新速率等方面都更具优势。  
#### 打印机  
打印机是计算机的输出设备之一，用于将计算机的处理结果打印在相关介质上。  
按工作原理，打印机分为击打式和非击打式两大类；按工作方式，打印机分为点阵打印机、针式打印机、喷墨式打印机、激光打印机等。  
+ 针式打印机  
  原理：在联机状态下，主机发出打印命令，经接口、检测和控制电路，间歇驱动纵向送纸和打印头横向移动，同时驱动打印机间歇冲击色带，在纸上打印出所需的内容。  
  特点：针式打印机擅长“多层复写打印”，实现各种票据或蜡纸等的打印。其工作原理简单，造价低廉，耗材（色带）便宜，但打印分辨率和打印速度不够高。  
+ 喷墨式打印机  
  带电的喷墨雾点经过电极偏转后，直接在纸上形成所需字形。彩色喷墨打印机基于三基色原理，即分别喷射3种颜色的墨滴，按一定比例混合出所需要的颜色。  
  特点：打印噪声小，可实现高质量彩色打印，通常打印速度比针式打印机快；但防水性查，高质量打印需要专用打印纸。  
+ 激光打印机  
  原理：计算机输出的二进制信息，经过调制后的激光束扫描，在感光故上形成潜像，再经过显影、转影和定影，在纸上得到所需的字符或图像。  
  特点：打印质量高、速度快、噪音小、处理能力强；但耗材多、价格较贵、不能复写打印多份，且对纸张的要求高。  
  激光打印机是将激光技术和电子显像技术相结合的产物。感光鼓（硒鼓）是激光打印机的核心部件。  

### 外存储器  
计算机的外存储器又称辅助存储器，目前主要使用磁表面存储器。  
所谓“磁表面存储”，是指把某些磁性材料薄薄地涂在金属铝或塑料表面上作为磁载体来存储信息。磁盘存储器、磁带存储器和磁鼓存储器军属于磁表面存储器。  
磁表面存储器的优点：  
+ 存储容量大，位价格低  
+ 记录介质可重复使用  
+ 记录信息可长期保存而不丢失，甚至可脱机存档  
+ 非破坏性读出，读出时不需要再生  

缺点：存取速度慢，机械结构复杂，对工作环境要求较高。  
#### 磁盘存储器  
+ 磁盘设备的组成  
  - 存储区域。一块硬盘含有若干记录面，每个记录面划分为若干磁道，而每条磁道又划分为若干个扇区，扇区（也称块）是磁盘读写的最小单位，即磁盘按块存取。  
  Heads磁头数：即记录面数，表示硬盘共有多少个磁头，磁头用于读取/写入盘片商记录面的信息，一个记录面对应一个磁头。  
  Cylinders柱面数：表示硬盘每个盘面上有多少条磁道。在一个盘组中，不同记录面的相同编号（位置）的所有磁道构成一个圆柱面。  
  Sectors扇区数：表示每条磁道上有多少个扇区。  
  - 硬盘存储器的组成。硬盘存储器由磁盘驱动器、磁盘控制器和盘片组成。  
  磁盘驱动器。核心部件是磁头组件和盘片组件，温彻斯特盘是一种可移动磁头固定盘片的硬盘存储器。  
  磁盘控制器。硬盘存储器和主机的接口，主流的标准由IDE、SCSI、SATA等。  
+ 磁记录原理  
原理：磁头和磁性记录介质相对运动时，通过电磁转换完成读/写操作。  
编码方法：按某种方案（规律），把一连串的二进制信息变换成存储介质磁层中一个磁化翻转状态的序列，并使读/写控制电路容易、可靠地实现转换。  
磁记录方式：通常采用调频制FM和改进型调频制MFM的记录方式。  
+ 磁盘的性能指标  
  - 磁盘的容量。一个磁盘所能存储的字节总数称为磁盘容量，磁盘容量有非格式化容量和格式化容量之分。非格式化容量是指磁记录表面可以利用的磁化单元的总数，格式化容量是指按照某种特点的记录格式所能存储信息的总量。  
  - 记录密度。记录密度是指盘片单位面积上记录的二进制信息总量，通常以道密度、位密度和面密度表示。道密度是沿磁盘半径方向单位长度上的磁道数，位密度是磁道单位长度上所记录的二进制代码位数，面密度是位密度和道密度的乘积。  
  - 平均存取时间。平均存取时间是由寻道时间（磁头移动到目的磁道的时间）、旋转延迟时间（磁头定位到要读写的扇区的时间，即旋转一周时间的一半——平均时间）和传输时间（传输数据所花费的时间）三部分构成。由于寻道和找扇区的距离远近不一，因此前两部分通常取平均值。  
  - 数据传输率。磁盘存储器在单位时间内向主机传送数据的字节数，称为数据传输率。假设磁盘转速为r转/秒，每条磁道容量为N字节，则数据传输率为  
  D<sub>r</sub>=rN  
+ 磁盘地址  
  主机向磁盘控制器发送寻址信息，磁盘的地址格式一般为：  

  |驱动器号|柱面（磁道）号|盘面号|扇区号|  
  |---|---|---|---|  

  若系统中有4个驱动器，每个驱动器带一个磁盘，每个磁盘256个磁道、16个盘面，每个盘面16个扇区，则每个扇区地址要2+8+4+4=18位二进制代码。  
+ 硬盘的工作过程  
  硬盘的主要操作是寻址、读盘、写盘。每个操作都对应一个控制字，硬盘工作时，第一步是取控制字，第二步是执行控制字。  
  硬盘属于机械式部件，其读写操作是串行的，不可能在同一时刻既读又写，也不可能在同一时刻读两组数据或写两组数据。  
#### 磁盘阵列  
RAID廉价冗余磁盘阵列是指将多个独立的物理磁盘组成一个独立的逻辑盘，数据在多个物理盘上分割交叉存储、并行访问，具有更好的存储性能、可靠性和安全性。  
RAID的分级如下：  
RAID0：无冗余和无校验的磁盘阵列  
RAID1：镜像磁盘阵列  
RAID2：采用纠错的海明码的磁盘阵列  
RAID3：位交叉奇偶校验的磁盘阵列  
RAID4：块交叉奇偶校验的磁盘阵列  
RAID5：无独立校验的奇偶校验磁盘阵列  
RAID0把连续多个数据块交替地放在不同物理磁盘的扇区中，几个磁盘交叉并行读写，不仅扩大了存储容量，而且提高了磁盘数据存取速度，但RAID0没有容错能力。  
为了提高可靠性，RAID1使两个硬盘同时进行读写，互为备份，若一个磁盘出现故障，可从另一磁盘中读出数据。两个磁盘当一个磁盘使用，意味着容量减少一半。  
RAID通过同时使用多个磁盘，提高了传输率；通过在多个磁盘上并行存取来大幅提高存储系统的数据吞吐率；通过镜像功能，提高安全可靠性；通过数据校验，提供容错能力。  
#### 光盘存储器  
光盘存储器是利用光学原理读写信息的存储装置，他采用聚散激光束对盘式介质以非接触方式记录信息。  
完整的光盘存储系统由光盘片、光盘驱动器、光盘控制器和光盘驱动软件组成。光盘片由透明的聚合物基片、铝合金反射层、薄膜保护层的固盘构成。  
特点：具有存储密度高、携带方便、成本低、容量大、存储期限长和容易保存等优点。  
光盘的类型如下：  
+ CD-ROM：只读型光盘，只能读出其中的内容，不能写入或修改。  
+ CD-R：只可写入一次信息，之后不可修改。  
+ CD-RW：可读可写光盘，可以重复读写。  
+ DVD-ROM：高容量的CD-ROM，DVD表示通用数字化多功能光盘。  
#### 固态硬盘  
微小型高档笔记本计算机采用高性能Flash Memory作为硬盘来记录数据，这种“硬盘”称为固态硬盘。固态硬盘除需要Flash Memory外，还需要其他硬件和软件的支持。  

---  
## I/O接口  
I/O接口（I/O控制器）是主机和外设的交接界面，通过接口可以实现主机和外设之间的信息交换。主机和外设具有各自的工作特点，它们在信息形式和工作速度上具有很大的差异，接口正是为了解决这些差异而设置的。  
### I/O接口的功能  
I/O接口的主要功能如下：  
+ 实现主机和外设的通信联络控制。解决主机与外设时序配合问题，协调不同工作速度的外设和主机之间交换信息，以保证整个计算机系统能统一、协调地工作。  
+ 进行地址译码和设备选择。CPU送来选择外设的地址码后，接口必须对地址进行译码以产生设备选择信息，使主机能和指定外设交换信息。  
+ 实现数据缓冲。CPU与外设之间的速度往往不匹配，为消除速度差异，接口必须设置数据缓冲寄存器，用于数据的暂存，以避免因速度不一致而丢失数据。  
+ 信号格式的转换。外设与主机两者的电平、数据格式都可能存在差异，接口应提供计算机与外设的信号格式的转换功能，如电平转换、并/串或串/并转换、模/数或数/模转换等。  
+ 传送控制命令和状态信息。CPU要启动某一外设时，通过接口中的命令寄存器向外设发出启动命令；外设准备就绪时，则将“准备好”状态信息送回接口中的状态寄存器，并反馈给CPU。外设向CPU提出中断请求时，CPU也应有相应的响应信息反馈给外设。