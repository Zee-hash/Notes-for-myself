# 特殊矩阵的压缩存储  
> 矩阵在计算机图像学、工程计算中有着举足轻重的低位。在数据结构中考虑的是如何用最小的内存空间来存储同样的一组数据。  

## 数组的定义  
数组是由*n(n>=1)*个相同类型的数据元素构成的有限序列，每个数据元素称为一个数组元素，每个元素在*n*个线性关系中的序号称为该元素的下标，下标的取值范围称为数组的维界。  
数组和线性表的关系：数组是线性表的推广。一维数组可视为一个线性表；二维数组可视为其元素也是定长线性表的线性表，以此类推。数组一旦被定义，其维数和维界就不再改变。因此，除结构的初始化和销毁外，数组只会有存取元素和谢改元素的操作。  
## 数组的存储结构  
大多数计算机语言都提供了数组数据类型，逻辑意义上的数组可采用计算机语言中的数组数据类型进行存储，一个数组的所有元素在内存中占用一段连续的存储空间。  
以一维数组A[0...n-1]为例，其存储结构关系式为  
*LOC(a<sub>i</sub>) = LOC(a<sub>0</sub>) + i × Ｌ(0<=i<=n)*  
其中，L是每个数组元素所占的存储单元。  
对于多组数组，有两种映射方式：按行优先和按列优先。以二维数组为例，按行优先存储的基本思想是：先行后列，先存储行号较小的元素，行号相等先存储列号较小的元素。设二维数组的行下标和列下标的范围分别是[0, h<sub>1</sub>]与[0, h<sub>2</sub>],则存储结构关系式为  
*LOC(a<sub>i,j</sub>) = LOC(a<sub>0,0</sub>) + [i × (h<sub>2</sub> + 1) + j] × L*  
当以列优先方式存储时，得出存储结构关系式为  
*LOC(a<sub>i,j</sub>) = LOC(a<sub>0,0</sub>) + [j × (h<sub>1</sub> + 1) + i] × L*  

## 矩阵的压缩存储  
压缩存储：指为相同值相同的元素只分配一个存储空间，对零元素不分配存储空间。其目的是为了节省存储空间。  
特殊矩阵：指具有许多相同矩阵元素或零元素，并且这些相同矩阵元素或零元素的分布有一定规律性的矩阵。常见的特殊矩阵有对称矩阵、上（下）三角矩阵、对角矩阵等。  
特殊矩阵的压缩存储方法：找出特殊矩阵中值相同的矩阵元素的分布规律，把那些呈现规律性分布的、值相同的多个矩阵元素压缩到一个存储空间中。  
### 对称矩阵  
若对一个n阶方阵A[1...n][1...n]中的任意一个元素a<sub>i,j</sub> = a<sub>j,i</sub>(1<=i,j<=n)，则称其为对称矩阵。对于一个n阶方阵，其中的元素可划分为3个部分，即上三角区、主对角线和下三角区。  
对于n阶对称矩阵，上三角区的所有元素和下三角区的对应元素相同，若仍采用二维数组存放，则会浪费几乎一半的空间，为此将对称矩阵A[1...n][1...n]存放在一维数组B[n(n+1)/2]中，即元素a<sub>i,j</sub>存放在b<sub>k</sub>中。只存放下三角部分（含主对角线）的元素。  
在数组B中，位于元素a<sub>i,j</sub>(i>=j)前面的元素个数为  
第一行：1个元素（a<sub>1,1</sub>)  
第二行：2个元素（a<sub>2,1</sub>,a<sub>2,2</sub>）  
······  
第i-1行：i-1个元素(a<sub>i-1,1</sub>,a<sub>i-1,2</sub>,···,a<sub>i-1,i-1</sub>)  
第i行：j-1个元素（a<sub>i,1</sub>,a<sub>i,2</sub>,···,a<sub>i,j-1</sub>）  
因此，元素a<sub>i,j</sub>在数组B中的下标*k = 1 + 2 + ··· + (i-1) + (j - 1) = i (i - 1) / 2 + j - 1*  
**上式中矩阵下标从1开始，数组下标从0开始**  

### 三角矩阵  
下三角矩阵中，上三角的所有元素均为同一常量。其存储思想是对称矩阵类似，不同之处在于存储完下三角区和主对角线上的元素之后，紧接着存储对角线上方的常量一次，故可以将下三角矩阵A[1...n][1...n]压缩存储在B[n(n+1)/2 **+ 1**]中。  
元素下标之间的对应关系为  
k = i(i-1)/2 + j - 1 (i>=j 下三角区和主对角线元素)  
k = n(n+1)/2 (i<j上三角区元素)  

上三角矩阵中，下三角区的所有元素均为同一常量。只需存储主对角线、上三角区的元素和下三角区的常量一次，可将其压缩存储在B[n(n+1)/2 **+ 1**]中。  
在数组B中，位于元素a<sub>i,j</sub>(i<=j)前面的元素个数为  
第一行：n个元素  
第二行：n-1个元素  
······  
第i-1行：n-i+2个元素  
第i行：j-i个元素  
因此，元素a<sub>i,j</sub>在数组B中的下标*k = n + (n-1) + ··· + (n-i+2) + (j-i)*  
因此，元素下标之间的对应关系如下：  
k = (i-1)(n+n-i+2)/2 + (j - i) (i<=j 上三角区和主对角线元素)  
k = n(n+1)/2 (i>j 下三角区元素)  

### 三对角矩阵  
对角矩阵也称带状矩阵。对于n阶方阵A中的任一元素a<sub>i,j</sub>，当|i-j|>1时，有a<sub>i,j</sub>=0（1<=i,j<=n)，则称为三对角矩阵。在三对角矩阵中，所有非零元素都集中在以主对角线为中心的3条对角线的区域，其他区域的元素都为0。  
三对角矩阵A也可以采用压缩矩阵，将3条对角线上的元素按行优先方式存放在一维数组B中，且a<sub>1,1</sub>存放于B[0]中。  
由此可以计算矩阵A中3条对角线上的元素a<sub>i,j</sub>(1<=i,j<=n,|i-j|<=1)在一维数组B中存放的下标为k = 2×i+j-3。  

### 稀疏矩阵  
矩阵中非零元素的个数为t，相对矩阵元素的个数s来说非常少，即s>>t的矩阵称为稀疏矩阵。  
若采用常规的方法存储稀疏矩阵，则相当浪费存储空间，因此仅存储非零元素。但通常非零元素的分布没有规律，所以仅存储非零元素的值是不够的，还要存储它所在的行和列。因此，将非零元素及其相应的行和列构成一个三元组（行标、列标、值）。然后再按照某种规律存储这些三元组。稀疏矩阵压缩存储后便失去了随机存取特性。  
稀疏矩阵的三元组既可以采用数组存储，也可以采用十字链表法存储。  