# 计算机系统概述  
---  
## 计算机发展历程  
### 计算机硬件的发展  
+ 计算机的四代变化
  - 第一代(1946~1957)——电子管，使用机器语言进行编程
  - 第二代(1958~1964)——晶体管，开始使用高级语言进行编程  
  - 第三代(1965~1971)——中小规模集成电路时代，高级语言发展迅速，开始出现分时操作系统  
  - 第四代——超大规模集成电路时代，产生了微处理器；并行、流水线、高速缓存和虚拟存储器等开始应用  
+ 计算机元件的更新换代  
  - 摩尔定律。当价格不变时，集成电路上可容纳的晶体管数量，每隔18个月便会增加一倍。  
  - 半导体存储器的发展
  - 微处理器的发展。Intel 4004、Intel 8008、Intel 8080、Intel 8086、Intel 8088、Intel 80286、Intel 80386、Intel 80486、Pentium、Pentium pro、Pentium II、Pentium III、Pentium 4...
### 计算机软件的发展  
电子计算机可分为电子模拟计算机和电子数字计算机。  
数字计算机又可按用途分为专用计算机和通用计算机。这是根据计算机的效率、速度、价格及运行的经济性和适应性来划分的。  
通用计算机又分为巨型机、大型机、中型机、小型机、微型机和单片机6类，它们的体积、功耗、性能、数据存储量、指令系统的复杂程度和价格等依次递减。  
此外，计算机按指令I和数据D流还可分为：  
1. 单指令系统和单数据流系统SISD，即传统冯·诺依曼体系结构  
2. 单指令流和多数据流系统SIMD，包括阵列处理器和向量处理器系统  
3. 多指令流和单数据流系统MISD，这种计算机实际上不存在  
4. 多指令流和多数据流系统MIMD，包括多处理器和多计算机系统  
  
计算机的发展趋势正向着“两极”分化：一极是微型计算机向更微型化、网络化、高性能、多用途方向发展；另一极是巨型机向更巨型化、超高速、并行处理、智能化方向发展。 

---
## 计算机系统层次结构  
### 计算机系统的组成  
硬件系统和软件系统共同构成了一个完整的计算机系统。硬件是指有形的物理设备，是计算机系统中实际物理装置的总称。软件是指在硬件上运行的程序和相关的数据及文档。  
计算机系统性能的好坏，很大程度是由软件的效率和作用来表征的，而软件性能的发挥又离不开硬件的支持。对某一功能来说，其既可以用软件实现，有可以用硬件实现，则称为软硬件在逻辑上是等效的。  
### 计算机硬件的基本组成  
1. 早期的冯·诺依曼在研究EDVAC机时提出了“存储程序”的概念，存储程序的思想奠定了现代计算机的基本结构，以此概念为基础的各类计算机通称为冯·诺依曼机，其特点如下：  
+ 计算机硬件系统由运算器、存储器、控制器、输入设备和输出设备5大部件组成  
+ 指令和数据以同等地位存储在存储器中，并可按地址寻访  
+ 指令和数据均用二进制代码表示  
+ 指令由操作码和地址码组成，操作码用来表示操作的性质，地址码用来表示操作数在存储器中的位置  
+ 指令在存储器中按顺序存放。通常，指令是顺序执行的，在特定的条件下可根据运算结构或根据设定的条件改变执行顺序  
+ 早期的冯·诺依曼机以运算器为中心，输入/输出设备通过运算器与存储器传送数据  
  
2. 现代计算机的组织结构  
在微处理器面世之前，运算器和控制器分离，而且存储器的容量很小，因此设计成以运算器为中心的结构，其他部件通过运算器完成信息的传递。  
而随着微电子技术的进步，同时计算机需要处理、加工的信息量也与日俱增，大量I/O设备的速度与CPU的速度差距悬殊，因此以运算器为中心的结构不能满足计算机发展的要求。**现代计算机以发展为以存储器为中心**，使I/O操作尽可能地绕过CPU，直接在I/O设备与存储器之间完成，以提高系统的整体运行效率。  
目前绝大多数计算机仍遵循冯·诺依曼的存储程序的设计思想。  

3. 计算机的功能部件  
传统冯·诺依曼计算机和现代计算机的结构虽然有所不同，但功能部件都是一致的，它们的功能包括如下几种：  
+  输入设备  
输入设备的主要功能是将程序和数据以机器所能识别和接受的信息形式输入计算机。  
+ 输出设备  
输出设备的任务是将计算机处理的结果以人们所能接受的形式或其他系统所要求的信息形式输出。I/O设备是计算机和外界联系的桥梁，是计算机中不可缺少的重要组成部分。  
+ 存储器
存储器是计算机的存储部件，是用来存放程序和数据。  
存储器分为主存储器和辅助存储器。**CPU能够直接访问的存储器是主存储器。** 辅助存储器用于帮助主存记忆更多的信息，**辅助存储器中的信息必须调入主存后，才能为CPU所访问。**  
主存储器的由许多存储单元组成，每个存储单元包含若干个存储元件，每个存储元件存储一位二进制代码。因此存储单元可以存储一串二进制代码，称这串代码为存储字，这串二进制代码的长度为存储字长，存储字长可以是1B或是1B的偶数倍。  
主存储器的工作方式是按存储单元的地址进行存取，这种存取方式称为按地址存取方式。  
主存储器主要包括**存储体、地址寄存器、数据寄存器、时序逻辑控制**。其中存储体存放二进制信息，地址寄存器存放访存地址，经过地址译码后找到所选的存储单元。数据寄存器用于暂存要从存储器读或写的信息，时序逻辑控制用于产生存储器操作所需要的各种时序信号。  
**MAR用于寻址，其位数对应着存储单元的个数。MAR的长度与PC的长度相等。**  
**MDR的位数和存储字长相等，一般为字节的二次幂的整数倍。**  
`【NOTE:MAR和MDR虽然是存储器的一部分，但在现代一般存在于CPU中】`  
+ 运算器  
运算器是计算机的执行部件，用于进行算术计算和逻辑计算。  
运算器的核心是算术逻辑单元（ALU）。运算器包含若干通用寄存器，用于暂存操作数和中间结果，如**累加器ACC、乘商寄存器MQ、操作数寄存器X、变址寄存器IX、基址寄存器BR等**，其中前三个是必须有的。  
运算器内还有程序状态寄存器PSW，也称标志寄存器，用于存放ALUy运算得到的一些标志信息或处理机的状态信息，如结果是否溢出、有无产生进位或借位、结果是否为负等。  
+ 控制器
控制器是计算机的指挥中心，由其“指挥”各个部件自动协调地进行工作。控制器由程序计数器PC、指令寄存器IR和控制单元CU组成。  
PC用来存放当前欲执行指令的地址，可以自动加一以形成下一条指令的地址，它与主存的MAR之间有一条直接通路。  
IR用来存放当前的指令，其内容来自主存的MDR。指令中的操作码送至CU，用以分析指令并发出各种微操作命令序列；而地址码送至MAR，用以取操作数。  
一般将运算器和控制器集成到同一个芯片上，成为中央处理器CPU。CPU和主存共同构成主机，而除主机外的其他硬件装置（外存、I/O设备等）统称为外部设备，简称外设。  

### 计算机软件的分类  
1. 系统软件和应用软件  
软件按照其功能分类，可分为系统软件和应用软件  
系统软件是一组保证计算机系统高效、正确运行的基础软件，通常作为系统资源提供给用户使用。系统软件主要有**操作系统OS、数据库管理系统DBMS、语言处理程序、分布式软件系统、网络软件系统、标准库程序、服务性程序等**  
应用程序是指用户为解决某个应用领域中的各类问题而编制的程序，如各种科学计算类程序、工程设计类程序、数据统计与处理程序等。  
DBMS！=DBS  
2. 三个级别的语言  
+ 机器语言——计算机唯一可以直接识别和执行的语言。  
+ 汇编语言——必须经汇编程序翻译为机器语言，才能直接在硬件系统上执行。  
+ 高级语言——需经过编译和汇编过程到机器语言，才能被执行。  

### 计算机的工作过程  
计算机的工作过程分为以下三个步骤：  
+ 把程序和数据**装入**主存储器  
+ 将源程序转换成可执行文件  
+ 从可执行文件的首地址开始逐条执行指令  
#### 从源程序到可执行文件  
UNIX中GCC编译程序转换过程  
hello.c--①->hello.i--②->hello.s--③->hello.o--④->hello  
① 预处理，执行后的文件为修改了的源程序文本文件  
② 编译器，执行结果为汇编程序，仍为文本文件  
③ 汇编器，执行结果为可重定位目标程序，二进制文件  
④ 链接器，可执行目标程序，二进制文件  
#### 指令执行过程的描述  
程序中第一条指令的地址置于PC中，根据PC取出第一条指令，经过译码、执行等步骤。控制计算机各功能部件协同运行，完成这条指令的功能，并计算下一条指令的地址。用新得到的指令地址继续读出第二条指令并执行，直到程序结束为止。  

### 计算机系统的多级层次结构  
现代计算机是一个硬件与软件组成的综合体。由于面对的应用范围越来越广，因此必须有复杂的系统软件和硬件的支持。由于软/硬件的设计者和使用者都从不同的角度并用不同的语言来对待同一个计算机系统，因此他们各自看到的计算机系统的属性及对计算机系统提出的要求也就不同。  
+ 微程序机器层。它是一个实在的硬件层，它由机器硬件直接执行微指令。  
+ 传统机器语言层。它也是一个实际的机器层，由微程序解释机器指令系统。  
+ 操作系统层。它由操作系统程序实现。操作系统程序是由机器指令和广义指令组成的，这些广义指令是为了扩展及其功能而设置的，是由操作系统定义和解释的软件指令，所以这一层也叫混合层。  
+ 汇编语言层。它为用户提供一种符号化的语言，借此可编写汇编语言源程序。这一层由汇编语言支持和执行。  
+ 高级语言层。它是面向用户的，是为了方便用户编写应用程序而设置的。该层由各种高级语言编译程序支持和执行。  
+ 【应用层】。它由解决实际问题和应用问题的处理程序组成，如文字处理软件、数据库软件、多媒体处理软件和办公自动化软件等。  

---
## 计算机的性能指标  
### 计算机的主要性能指标  
1. 机器字长  
机器字长是指计算机进行一次整数运算（即定点整数运算）所能处理的二进制数据的位数，通常与CPU的寄存器位数、加法器有关。因此，机器字长一般等于内部寄存器的大小，字长越长，数的表示范围越大，计算精度越高。计算机字长通常选定为字节的整数倍。  
2. 数据通路带宽  
数据通路带宽是指数据总线一次所能并行传送信息的位数。  
3. 主存容量  
主存容量是指主存储器所能存储信息的最大容量，通常以字节来衡量。其中，MAR的位数反映存储单元的个数，MAR的位数反映可寻址范围的最大值。  
4. 运算速度  
+ 吞吐量和响应时间。
  - 吞吐量。指系统在单位时间内处理请求的数量。它取决于信息能多快地输入内存，CPU能多快地取指令，数据能多快地从内存取出或存入，以及所得结果能多快地从内存送到一台外部设备。几乎每步都关心到主存，因此**系统吞吐量主要取决于主存的存取周期。**  
  - 响应时间。指从用户向计算机发送一个请求，到系统对该请求做出响应并获得所需结果的等待时间。通常包括CPU时间（运行一个程序所花费的时间）与等待时间（用于磁盘访问、存储器访问、I/O操作、操作系统开销等的时间）。  

+ 主频和CPU时钟时间  
  - CPU时钟周期。通常为节拍脉冲或T周期，即主频的倒数，它是CPU中最小的时间单位，**每个动作至少需要执行一个时钟周期**。  
  - 主频（CPU时钟频率）。机器内部主时钟的频率，是衡量机器速度的重要参数。对于同一个型号的计算机，其主频越高，完成指令的一个执行步骤所用的时间越短，执行指令的速度越快。  
  - CPI(Clock cycle Per Instruction)。即执行一条指令所需的时钟周期数。
  - CPU执行时间。指执行一个程序多花费的时间。  
`CPU执行时间 = CPU时钟周期数/主频 = （指令条数*CPI）/主频`  

+ MIPS、MFLOPS、GFLOPS和TFLOPS 
  - MIPS，每秒执行多少百万条指令  
  `MIPS = 指令条数/（执行时间*10^6） = 主频*CPI`  
  - MFLOPS，每秒执行多少百万次浮点运算  
  - GFLOPS，每秒执行多少十亿次浮点运算  
  - TFLOPS，每秒执行多少万亿次浮点运算  

### 几个专业术语  
1. 系列机  
具有基本相同的体系结构，使用相同基本指令系统的多个不同型号的计算机组成的一个产品系列。  
2. 兼容  
指计算机软件或硬件的通用性，即使用或运行在某个型号的计算机系统中的硬件/软件也能应用于另一个型号的计算机系统时，称这两台计算机在硬件或软件上存在兼容性。  
3. 软件可移植性  
指把使用在某个系列计算机中的软件直接或进行很少的修改就能运行在另一个系列计算机中的可能性。  
4. 固件  
将程序固定在ROM中组成的部件称为固件。固件是一种具有软件特性的硬件，固件的性能指标介于硬件和软件之间，吸收了软/硬件各自的优点，其执行速度快于软件，灵活性优于硬件，是软/硬件结合的产物。  